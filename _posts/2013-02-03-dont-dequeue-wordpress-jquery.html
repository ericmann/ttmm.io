---
layout: post
title: Don't Dequeue WordPress' jQuery
date: 2013-02-03 14:20:29.000000000 -08:00
type: post
parent_id: '0'
published: true
password: ''
status: publish
categories:
- Technology
tags:
- Cdn
- Dequeue
- Google
- javascript
- jQuery
- Question
- Stupid Questions
- WordPress
meta:
  _yoast_wpseo_linkdex: '76'
  _edit_last: '2'
  _yoast_wpseo_focuskw: jquery
  _yoast_wpseo_title: Don't Dequeue WordPress' jQuery
  _yoast_wpseo_metadesc: 'The most-asked question about WordPress development: How
    do I use Google''s jQuery instead? Turns out there is such a thing as a stupid
    question.'
  _scribe_content_analysis: 'O:8:"stdClass":7:{s:8:"docScore";i:100;s:9:"docScoreE";a:0:{}s:11:"fleschScore";s:14:"very
    difficult";s:8:"keywords";a:9:{i:0;O:8:"stdClass":12:{s:3:"kwc";i:5;s:3:"kwd";d:2.520000000000000017763568394002504646778106689453125;s:3:"kwe";a:0:{}s:3:"kwf";i:10;s:3:"kwl";i:1;s:7:"kwlText";s:7:"Primary";s:3:"kwo";s:1:"A";s:4:"kwod";s:109:"Congratulations,
    this term strikes a good balance between search optimization and copywriting best
    practices.";s:3:"kwp";s:9:"Very High";s:3:"kwr";i:1;s:3:"kws";i:10;s:4:"text";s:9:"wordpress";}i:1;O:8:"stdClass":12:{s:3:"kwc";d:3.589999999999999857891452847979962825775146484375;s:3:"kwd";d:0.7600000000000000088817841970012523233890533447265625;s:3:"kwe";a:2:{i:0;s:4:"KwEM";i:1;s:5:"KwELF";}s:3:"kwf";i:3;s:3:"kwl";i:2;s:7:"kwlText";s:9:"Important";s:3:"kwo";s:1:"C";s:4:"kwod";s:139:"While
    your copywriting is strong, consider writing more about this topic on your site
    and/or use this term more frequently in your content.";s:3:"kwp";s:9:"Very High";s:3:"kwr";i:4;s:3:"kws";i:0;s:4:"text";s:7:"dequeue";}i:2;O:8:"stdClass":12:{s:3:"kwc";d:2.62999999999999989341858963598497211933135986328125;s:3:"kwd";d:2.270000000000000017763568394002504646778106689453125;s:3:"kwe";a:1:{i:0;s:4:"KwET";}s:3:"kwf";i:9;s:3:"kwl";i:3;s:7:"kwlText";s:11:"Significant";s:3:"kwo";s:1:"C";s:4:"kwod";s:139:"While
    your copywriting is strong, consider writing more about this topic on your site
    and/or use this term more frequently in your content.";s:3:"kwp";s:6:"Medium";s:3:"kwr";i:5;s:3:"kws";i:0;s:4:"text";s:6:"google";}i:3;O:8:"stdClass":12:{s:3:"kwc";i:5;s:3:"kwd";d:7.04999999999999982236431605997495353221893310546875;s:3:"kwe";a:0:{}s:3:"kwf";i:28;s:3:"kwl";i:1;s:7:"kwlText";s:7:"Primary";s:3:"kwo";s:1:"C";s:4:"kwod";s:139:"While
    your copywriting is strong, consider writing more about this topic on your site
    and/or use this term more frequently in your content.";s:3:"kwp";s:9:"Very High";s:3:"kwr";i:2;s:3:"kws";i:0;s:4:"text";s:6:"jquery";}i:4;O:8:"stdClass":12:{s:3:"kwc";d:4.62999999999999989341858963598497211933135986328125;s:3:"kwd";d:2.270000000000000017763568394002504646778106689453125;s:3:"kwe";a:1:{i:0;s:4:"KwET";}s:3:"kwf";i:9;s:3:"kwl";i:1;s:7:"kwlText";s:7:"Primary";s:3:"kwo";s:1:"C";s:4:"kwod";s:139:"While
    your copywriting is strong, consider writing more about this topic on your site
    and/or use this term more frequently in your content.";s:3:"kwp";s:9:"Very High";s:3:"kwr";i:3;s:3:"kws";i:0;s:4:"text";s:8:"question";}i:5;O:8:"stdClass":12:{s:3:"kwc";d:1.2199999999999999733546474089962430298328399658203125;s:3:"kwd";d:1.5100000000000000088817841970012523233890533447265625;s:3:"kwe";a:2:{i:0;s:4:"KwET";i:1;s:4:"KwEM";}s:3:"kwf";i:6;s:3:"kwl";i:4;s:7:"kwlText";s:14:"Not
    Emphasized";s:3:"kwo";s:1:"D";s:4:"kwod";s:129:"You will need to do some work
    for this term, including improving your copywriting and writing more about this
    topic on your site.";s:3:"kwp";s:8:"Very Low";s:3:"kwr";i:8;s:3:"kws";i:0;s:4:"text";s:3:"cdn";}i:6;O:8:"stdClass":12:{s:3:"kwc";d:1.2199999999999999733546474089962430298328399658203125;s:3:"kwd";d:0.25;s:3:"kwe";a:3:{i:0;s:4:"KwET";i:1;s:4:"KwEM";i:2;s:5:"KwELF";}s:3:"kwf";i:1;s:3:"kwl";i:4;s:7:"kwlText";s:14:"Not
    Emphasized";s:3:"kwo";s:1:"D";s:4:"kwod";s:129:"You will need to do some work
    for this term, including improving your copywriting and writing more about this
    topic on your site.";s:3:"kwp";s:8:"Very Low";s:3:"kwr";i:7;s:3:"kws";d:1.0500000000000000444089209850062616169452667236328125;s:4:"text";s:10:"javascript";}i:7;O:8:"stdClass":12:{s:3:"kwc";d:1.62999999999999989341858963598497211933135986328125;s:3:"kwd";d:0.25;s:3:"kwe";a:2:{i:0;s:4:"KwET";i:1;s:5:"KwELF";}s:3:"kwf";i:1;s:3:"kwl";i:4;s:7:"kwlText";s:14:"Not
    Emphasized";s:3:"kwo";s:1:"D";s:4:"kwod";s:129:"You will need to do some work
    for this term, including improving your copywriting and writing more about this
    topic on your site.";s:3:"kwp";s:8:"Very Low";s:3:"kwr";i:6;s:3:"kws";i:0;s:4:"text";s:11:"development";}i:8;O:8:"stdClass":12:{s:3:"kwc";d:1.2199999999999999733546474089962430298328399658203125;s:3:"kwd";d:0.25;s:3:"kwe";a:3:{i:0;s:4:"KwET";i:1;s:4:"KwEM";i:2;s:5:"KwELF";}s:3:"kwf";i:1;s:3:"kwl";i:4;s:7:"kwlText";s:14:"Not
    Emphasized";s:3:"kwo";s:1:"D";s:4:"kwod";s:129:"You will need to do some work
    for this term, including improving your copywriting and writing more about this
    topic on your site.";s:3:"kwp";s:8:"Very Low";s:3:"kwr";i:9;s:3:"kws";i:0;s:4:"text";s:7:"today''s";}}s:11:"scribeScore";i:61;s:4:"tags";a:12:{i:0;s:9:"wordpress";i:1;s:7:"dequeue";i:2;s:6:"google";i:3;s:6:"jquery";i:4;s:8:"question";i:5;s:3:"cdn";i:6;s:10:"javascript";i:7;s:11:"development";i:8;s:7:"today''s";i:9;s:12:"ask
    question";i:10;s:13:"locate server";i:11;s:16:"stupid questions";}s:7:"request";O:8:"stdClass":4:{s:10:"html_title";s:31:"Don''t
    Dequeue WordPress'' jQuery";s:11:"description";s:144:"The most-asked question
    about WordPress development: How do I use Google''s jQuery instead? Turns out
    there is such a thing as a stupid question.";s:7:"content";s:6297:"<p>As a moderator
    on the <a title="WordPress Stack Exchange" href="http://wordpress.stackexchange.com/">WordPress
    Stack Exchange</a>, I end up spending a lot of time on the site.  I see lots of
    <a title="When should you use WP_Query vs query_posts() vs get_posts()?" href="http://wordpress.stackexchange.com/q/1753/46">great
    questions</a>, lots of not-so-great questions, and several you''ve-got-to-be-kidding-me
    questions.  But the question I see the most often frustrates me:</p><blockquote><p>How
    do I remove WordPress'' jQuery and use Google''s CDN version instead?</p></blockquote><p>I
    have no trouble saying that, if you''re asking this question, you have no business
    building a website in the first place.<!--more--></p><h2>Why Use Google''s CDN?</h2><p>The
    three <a title="3 reasons why you should let Google host jQuery for you" href="http://encosia.com/3-reasons-why-you-should-let-google-host-jquery-for-you/">most
    commonly cited reasons</a> to dequeue WordPress'' bundled version of jQuery in
    favor of Googles are:</p><ol><li>Decreased Latency</li><li>Increased Parallelism</li><li>Better
    Caching</li></ol><p>If you didn''t know any better, each of these arguments makes
    a lot of sense.</p><p><strong>Decreased latency</strong> - the idea that jQuery
    will download faster from a properly-located CDN than your arbitrarily-located
    server - is a fallacy in today''s high-bandwidth world.  jQuery by itself is 91KB
    when it''s minified (not counting any server-side data compression).  Over a high-bandwidth
    connection, this downloads in less than half a second from just about anywhere
    (my server is located in a different country, yet jQuery still downloads in ~200ms
    for me).  Consider the size of the rest of your site - ~300k of scripts, ~100k
    of content, ~1-2m of images - and the footprint left by jQuery is inconsequential.</p><p><strong>Increased
    parallelism -</strong> the fact that a browser can only download so many resources
    at a time - is a valid concern.  But consider that nearly <em>all</em> of your
    calls to jQuery are wrapped in some kind of document-ready event and there''s
    an easy work-around: load jQuery in the <em>footer</em> rather than the header.
     Your content will load first and the user experience is not impacted by waiting
    a fraction of a second before your fancy animations fire.</p><p><strong>Better
    caching - </strong>the idea that Google''s servers will be configured more efficiently
    than yours - is bogus.  If you''re counting on Google''s well-configured CDN to
    save your site from a poorly set-up server environment, then you have absolutely
    no business building or hosting websites.  Your server should be fully capable
    of setting the appropriate cache control headers on script files and, if not,
    you should contract with someone who know what they''re doing to set it up.</p><h2>Why
    NOT Use Google''s CDN?</h2><p>WordPress takes great care to make sure its bundled
    libraries are fully compatible with other bundled scripts.  jQuery is loaded in
    "no conflict" mode to prevent any potential script collisions over the [cci]$[/cci]
    variable in the global namespace.  As of version 3.6, WordPress will be shipping
    with version 1.9 of jQuery - which removes several deprecated APIs like [cci].live()[/cci].
     To prevent things from breaking, WordPress automatically loads jQuery Migrate,
    a plugin that adds these removed APIs back to the system, but alerts you in the
    browser console of their deprecation.</p><p>If you load jQuery 1.9 yourself from
    Google''s CDN, you''ll miss out on the jQuery Migrate plugin and end up breaking
    several themes and plugins that depend on these deprecated APIs.  I still find
    [cci].live()[/cci] even in <em>new</em> code, so the chances of it littering your
    site and breaking things when you start swapping out libraries are extremely high.</p><p>Also,
    WordPress is <a title="Prevent plugins from overriding jQuery in the admin" href="http://core.trac.wordpress.org/ticket/22896">taking
    steps to prevent you</a> from dequeueing jQuery on the back end at all.  You''ll
    still be able to override it for the front-end if you absolutely need to, but
    if you ever find such a need, stop and ask yourself <em>why</em> before heading
    down that path.  Chances are good that your "need" is really just a patch over
    a deeper problem you don''t fully understand.</p><h2>Why is this the Wrong Question?</h2><p>I
    recently build a project for a client that worked flawlessly with jQuery 1.9,
    but broke with any lesser version.  My first (wrong) instinct was to remove the
    bundled jQuery and bump the loaded version to 1.9 instead.  It would have worked,
    but it wouldn''t really have fixed the issue.</p><p>Instead, I doubled down and
    walked back through the code instead.  I was using a lot of non-jQuery code in
    my system, and it turned out I had a typo.  With older versions of jQuery, my
    typo resulted in plain, non-functional code.  With the newer version of jQuery,
    my typo accidentally invoked a jQuery method where I was attempting to invoke
    a native JavaScript method.</p><p>The fix was to correct the typo, making my code
    work 100% independent of jQuery.</p><p>I spent a few hours looking for the best
    way to override the bundled version of jQuery, but that was the <em>wrong</em>
    approach.  The <em>right</em> approach was to ask an entirely different question: <strong>what
    will a different version of jQuery give me that I don''t have right now?</strong>
     The answer to that question: <strong>nothing</strong>.</p><h2>Moving On</h2><p>The
    only reason you should ever enqueue Google''s version of jQuery is if you are
    building a project for Google and they ask you to.  A properly configured server
    will cache just as effectively, completely eliminating any concerns regarding
    cache duration or script latency.  Moving your scripts to the right part of the
    page - the bottom - will further allay concerns about load time and user experience.</p><p>Nine
    times out of ten, "how do I replace the bundled version of jQuery" is the wrong
    question.  It''s a question most frequently asked by newer web developers and
    it betrays your inexperience.  Instead, take some extra time to learn to do things
    the right way and your site will be just as fast.  Go for a fully-thought-out
    solution, not just a quick fix.</p>";s:3:"url";s:18:"http://eamann.com/";}}'
  _wpas_done_all: '1'
  yourls_shorturl: http://eam.me/q9
  _zem_rp_image: empty
  _jetpack_related_posts_cache: a:1:{s:32:"8f6677c9d6b0f903e98ad32ec61f8deb";a:2:{s:7:"expires";i:1409904087;s:7:"payload";a:3:{i:0;a:1:{s:2:"id";i:6077;}i:1;a:1:{s:2:"id";i:6049;}i:2;a:1:{s:2:"id";i:6323;}}}}
  keen_postview_count_this_24_hours: '16'
  keen_postview_count_this_7_days: '92'
  keen_postview_count_this_30_days: '348'
  _wpghs_github_path: _posts/2013-02-03-dont-dequeue-wordpress-jquery.md
  _yoast_wpseo_content_score: '60'
  _genesis_scripts_body_position: bottom
  _yoast_wpseo_primary_category: ''
  _wpas_skip_1588752: '1'
  _wpcom_is_markdown: '1'
author:
  login: eamann
  email: eric@eamann.com
  display_name: Eric
  first_name: Eric
  last_name: Mann
permalink: "/tech/dont-dequeue-wordpress-jquery/"
---
<p>As a moderator on the <a title="WordPress Stack Exchange" href="http://wordpress.stackexchange.com/">WordPress Stack Exchange</a>, I end up spending a lot of time on the site.  I see lots of <a title="When should you use WP_Query vs query_posts() vs get_posts()?" href="http://wordpress.stackexchange.com/q/1753/46">great questions</a>, lots of not-so-great questions, and several you've-got-to-be-kidding-me questions.  But the question I see the most often frustrates me:</p>
<blockquote><p>How do I remove WordPress' jQuery and use Google's CDN version instead?</p></blockquote>
<p>I have no trouble saying that, if you're asking this question, you have no business building a website in the first place.<!--more--></p>
<h2>Why Use Google's CDN?</h2>
<p>The three <a title="3 reasons why you should let Google host jQuery for you" href="http://encosia.com/3-reasons-why-you-should-let-google-host-jquery-for-you/">most commonly cited reasons</a> to dequeue WordPress' bundled version of jQuery in favor of Googles are:</p>
<ol>
<li>Decreased Latency</li>
<li>Increased Parallelism</li>
<li>Better Caching</li>
</ol>
<p>If you didn't know any better, each of these arguments makes a lot of sense.</p>
<p><strong>Decreased latency</strong> - the idea that jQuery will download faster from a properly-located CDN than your arbitrarily-located server - is a fallacy in today's high-bandwidth world.  jQuery by itself is 91KB when it's minified (not counting any server-side data compression).  Over a high-bandwidth connection, this downloads in less than half a second from just about anywhere (my server is located in a different country, yet jQuery still downloads in ~200ms for me).  Consider the size of the rest of your site - ~300k of scripts, ~100k of content, ~1-2m of images - and the footprint left by jQuery is inconsequential.</p>
<p><strong>Increased parallelism -</strong> the fact that a browser can only download so many resources at a time - is a valid concern.  But consider that nearly <em>all</em> of your calls to jQuery are wrapped in some kind of document-ready event and there's an easy work-around: load jQuery in the <em>footer</em> rather than the header.  Your content will load first and the user experience is not impacted by waiting a fraction of a second before your fancy animations fire.</p>
<p><strong>Better caching - </strong>the idea that Google's servers will be configured more efficiently than yours - is bogus.  If you're counting on Google's well-configured CDN to save your site from a poorly set-up server environment, then you have absolutely no business building or hosting websites.  Your server should be fully capable of setting the appropriate cache control headers on script files and, if not, you should contract with someone who know what they're doing to set it up.</p>
<h2>Why NOT Use Google's CDN?</h2>
<p>WordPress takes great care to make sure its bundled libraries are fully compatible with other bundled scripts.  jQuery is loaded in "no conflict" mode to prevent any potential script collisions over the [cci]$[/cci] variable in the global namespace.  As of version 3.6, WordPress will be shipping with version 1.9 of jQuery - which removes several deprecated APIs like [cci].live()[/cci].  To prevent things from breaking, WordPress automatically loads jQuery Migrate, a plugin that adds these removed APIs back to the system, but alerts you in the browser console of their deprecation.</p>
<p>If you load jQuery 1.9 yourself from Google's CDN, you'll miss out on the jQuery Migrate plugin and end up breaking several themes and plugins that depend on these deprecated APIs.  I still find [cci].live()[/cci] even in <em>new</em> code, so the chances of it littering your site and breaking things when you start swapping out libraries are extremely high.</p>
<p>Also, WordPress is <a title="Prevent plugins from overriding jQuery in the admin" href="http://core.trac.wordpress.org/ticket/22896">taking steps to prevent you</a> from dequeueing jQuery on the back end at all.  You'll still be able to override it for the front-end if you absolutely need to, but if you ever find such a need, stop and ask yourself <em>why</em> before heading down that path.  Chances are good that your "need" is really just a patch over a deeper problem you don't fully understand.</p>
<h2>Why is this the Wrong Question?</h2>
<p>I recently build a project for a client that worked flawlessly with jQuery 1.9, but broke with any lesser version.  My first (wrong) instinct was to remove the bundled jQuery and bump the loaded version to 1.9 instead.  It would have worked, but it wouldn't really have fixed the issue.</p>
<p>Instead, I doubled down and walked back through the code instead.  I was using a lot of non-jQuery code in my system, and it turned out I had a typo.  With older versions of jQuery, my typo resulted in plain, non-functional code.  With the newer version of jQuery, my typo accidentally invoked a jQuery method where I was attempting to invoke a native JavaScript method.</p>
<p>The fix was to correct the typo, making my code work 100% independent of jQuery.</p>
<p>I spent a few hours looking for the best way to override the bundled version of jQuery, but that was the <em>wrong</em> approach.  The <em>right</em> approach was to ask an entirely different question: <strong>what will a different version of jQuery give me that I don't have right now?</strong>  The answer to that question: <strong>nothing</strong>.</p>
<h2>Moving On</h2>
<p>The only reason you should ever enqueue Google's version of jQuery is if you are building a project for Google and they ask you to.  A properly configured server will cache just as effectively, completely eliminating any concerns regarding cache duration or script latency.  Moving your scripts to the right part of the page - the bottom - will further allay concerns about load time and user experience.</p>
<p>Nine times out of ten, "how do I replace the bundled version of jQuery" is the wrong question.  It's a question most frequently asked by newer web developers and it betrays your inexperience.  Instead, take some extra time to learn to do things the right way and your site will be just as fast.  Go for a fully-thought-out solution, not just a quick fix.</p>
