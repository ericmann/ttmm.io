<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    
        <!-- Begin Jekyll SEO tag v2.7.1 -->
<title>The Case for Singletons in WordPress | Things that Matter Most</title>
<meta name="generator" content="Jekyll v3.9.0" />
<meta property="og:title" content="The Case for Singletons in WordPress" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Please also review my follow-up post, Making Singletons Safe in PHP. There has been a lot of discussion this week regarding the Singleton pattern and whether or not it has a place in modern software development. &nbsp;Mike Schinkel wrote a tutorial about a Singleton factory. &nbsp;I wrote one about using Singletons as a WordPress plugin scaffold. &nbsp;Then the conversation bled over to Twitter and people questioned whether or not it was a sound development pattern at all. I would argue that Singletons are not just useful, but are&nbsp;necessary for robust software development. The Singleton Model To understand&nbsp;why I claim Singletons are necessary, we first have to agree on a definition of &quot;Singleton.&quot; A Singleton is a class for which there can exist one and only one instance during the life of the application., In practice[ref]By &quot;practice&quot; I mean in WordPress development in particular. &nbsp;WordPress is written in PHP, and PHP is by nature runs as a single thread. &nbsp;If you&#39;re dealing with a more dynamic, multi-threaded&nbsp;environment, the practices will differ significantly. &nbsp;I will rarely ever argue that a Singleton is the right use case in a multi-threaded .Net application, for example, but there are still situations where it&#39;s a useful pattern.[/ref] Singletons are used all over. &nbsp;Think of every time you&#39;ve used the [cci]global[/cci] keyword when working in WordPress. &nbsp;Not for Posts, which are atomic objects, but for framework-wide constructs like [cci]$wpdb[/cci] and [cci]$wp_rewrite[/cci]. These objects don&#39;t actually implement a Singleton design pattern, but for all intents and purposes they fit our definition. &nbsp;These are objects that are (typically) only instantiated once during the lifetime of a WordPress request-response cycle. &nbsp;You never call [cci]new wpdb()[/cci] in your themes and plugins; instead you make a reference to the [cci]global $wpdb[/cci] object that WordPress set up for you.[ref]In reality, you can (and will) call [cci]new wpdb()[/cci] if you are trying to connect to a new database. This is rare, though, and I was trying to find an example of a class most people use that already follows a Singleton pattern. In the majority of cases, you aren&#39;t connecting to a new database, so the [cci]new[/cci] keyword never appears in the context of the WP database object.[/ref] The Singleton model exists to protect you from memory bloat. &nbsp;In most cases, you never want more than one connection to the database open at any given time - so there&#39;s only one instance of the database object during the request. &nbsp;It also protects you from instantiating multiple copies of objects that are expensive to construct - it makes no sense to have multiple instances of the [cci]WP_Rewrite[/cci] class lying around. Why All the Hate? Still, Singletons are considered an &quot;anti-pattern&quot; by many developers. &nbsp;They claim it&#39;s an overused pattern that&#39;s misused by too many developers. &nbsp;True, it can be misused, but so can Axe body spray and words like YOLO. &nbsp;Overuse doesn&#39;t make them&nbsp;wrong per se, you just need to be very judicious in when, where, why, and how you use them. In some applications, Singletons are a horrible idea. &nbsp;They introduce the idea of a global state into the application - and that state can bleed across threads in multi-threaded, persistent applications. &nbsp;This means one request can inadvertently affect another. &nbsp;For stateless (REST) web services, this can lead to many a sleepless night. As a result, most developers will see &quot;Singleton&quot; and immediately think &quot;bad.&quot; &nbsp;They&#39;ve been trained to avoid the pattern and will summarily reject it if you suggest using a Singleton. When It Makes Sense As I&#39;ve already pointed out, WordPress already uses singly-instantiated objects that are placed in the global scope. &nbsp;So apparently it makes sense to at least a handful of people. I&#39;ve also used a Singleton as the backbone for my [cci]WP_Session[/cci] object. &nbsp;It&#39;s instantiated lazily (meaning only when you actually access it rather than when the class file is included by WordPress), and lives for the entire request. &nbsp;This is an object I&#39;ll used as a great example of why the Singleton pattern makes sense. I work on WordPress, but I&#39;m not the only developer. &nbsp;My code touches a few aspects of the application, like the XML-RPC system, the [cci]WP_Http[/cci] class, and certain other tiny elements. &nbsp;But WordPress itself is a huge application, with hundreds of contributors and maintainers. &nbsp;We have a few set of coding guidelines, but there&#39;s no guarantee everyone will write their code exactly the same time. So while&nbsp;I might only instantiate [cci]WP_Session[/cci] once, there&#39;s no guarantee other developers will respect that. &nbsp;Not in core, and certainly not in plugins. &nbsp;If the class could be instantiated multiple times, all it would take is one extra call to [cci]new WP_Session[/cci] to muck things up. Also, once I&#39;ve instantiated the class, since it&#39;s an object I intend for other developers to use, I have to place a reference to it in the global scope so their code can access the same instance. &nbsp;So, ultimately, there are two patterns I can follow to set up a single instance of [cci]WP_Session[/cci] for the request: class WP_Session { // Pray that this is only ever called by me public function __construct() { } }&lt;/p&gt; // Heavily document that this var shouldn&#39;t be abused global $wp_session; $wp_session = new WP_Session();&lt;/code&gt; Or using a Singleton - a static [cci]get_instance()[/cci] method will return the current instance, and the private constructor&nbsp;cannot be called outside of the class. class WP_Session { private static $instance;&lt;/p&gt; public static function get_instance() { if ( ! self::$instance ) { self::$instance = new self(); } return self::$instance; } private function __construct() { } } $wp_session = WP_Session::get_instance();&lt;/code&gt; What About Dependency Injection? This is the single greatest argument&nbsp;against Singletons that I&#39;ve heard. &nbsp;On Twitter, over email, and even on Stack Overflow I&#39;ve seen people arguing that dependency injection is a suitable replacement for the Singleton pattern. They&#39;re wrong. Dependency injection is a pattern that encourages you to abstract your dependencies so you can substitute mock objects in your code. &nbsp;Consider the following pseudo-code example: class Logger { var $persist;&lt;/p&gt; function __construct() { $this-&gt;persist = new FileSystemWriter( &#39;log.txt&#39; ); } function write( $event ) { $this-&gt;persist-&gt;save( $event ); } } $logger = new Logger();&lt;/code&gt; This kind of code would run just fine. &nbsp;However, you are stuck between a rock and a hard place should you need to change your code. &nbsp;If you want to change your application to log in a database rather than to the filesystem, you need to rewrite both your business logic code&nbsp;and your data persistence layer. &nbsp;Consider instead the following code: class Logger { var $persist;&lt;/p&gt; function __construct( $engine ) { $this-&gt;persist = $engine; } function write( $event ) { $this-&gt;persist-&gt;save( $event ); } } $fileEngine = new FileSystemWriter( &#39;log.txt&#39; ); $logger = new Logger( $fileEngine );&lt;/code&gt; Now, when you change your application, you just change the data persistence layer since you&#39;re passing the persistence object directly to the logic layer. &nbsp;Your code is highly decoupled and you can move forward with blissful flexibility. &nbsp;Dependency injection is truly an amazing paradigm to work within,&nbsp;but it does not solve the problems solved by Singletons. Unit Testing The biggest argument against Singletons - and where the misguided rants about dependency injection come from - is rooted in unit testing. When you&#39;re unit testing an application, each test should be completely isolated from every other test. &nbsp;Singletons make this difficult, since they introduce a global state for the application that must be managed in between each test. &nbsp;When you&#39;re working with other stateful objects in a testing environment (i.e. a database), you use dependency injection to introduce a mock object that implements a similar interface, but with stateless behavior. Basically, the mock object allows you to start every test with a clean slate. To unit test with Singletons, you have to do two things: Have the Singleton implement a standard interface that you can mock in your tests, then use dependency injection to inject the&nbsp;Singleton inside the application Implement a [cci]reset()[/cci] method within your Singleton that flushes the stored class instance The first step allows you to test your code that depends on the Singleton object without actually using the Singleton itself. class User { var $session;&lt;/p&gt; function __construct( $session ) { $this-&gt;session = $session; } function save_meta( $key, $value ) { $session[$key] = $value; } } $user = new User( WP_Session::get_instance() );&lt;/code&gt; The second step allows you to test the Singleton in isolation - just call [cci]Singleton::reset()[/cci] at the beginning of your test to ensure you&#39;re starting with a null state, then call it again at the end of the test to clean up after yourself. &nbsp;It&#39;s not the prettiest way to do things, but PHPUnit doesn&#39;t currently have per-test setup/teardown functionality. Conclusions Singletons are one of the most misunderstood constructs in software development. &nbsp;In most modern (read: multi-threaded) environments, their overuse has resulted in almost universal disgust for the pattern. &nbsp;However, in single-threaded, multi-developer systems - like WordPress - they serve an important and necessary purpose. &nbsp;Singletons allow you to maintain global, singly-instantiated objects in a particular request, keeping memory clean and optimizing your application through heavy operations (i.e. database or filesystem access). Singletons can be tricky to use in a unit test environment, but it&#39;s not impossible to test code that uses the pattern. &nbsp;Don&#39;t jump the gun and assume, just because hoards of developers on Stack Overflow dislike something, that it&#39;s a bad thing. &nbsp;Singletons have their place; you just need to learn how to use them properly." />
<meta property="og:description" content="Please also review my follow-up post, Making Singletons Safe in PHP. There has been a lot of discussion this week regarding the Singleton pattern and whether or not it has a place in modern software development. &nbsp;Mike Schinkel wrote a tutorial about a Singleton factory. &nbsp;I wrote one about using Singletons as a WordPress plugin scaffold. &nbsp;Then the conversation bled over to Twitter and people questioned whether or not it was a sound development pattern at all. I would argue that Singletons are not just useful, but are&nbsp;necessary for robust software development. The Singleton Model To understand&nbsp;why I claim Singletons are necessary, we first have to agree on a definition of &quot;Singleton.&quot; A Singleton is a class for which there can exist one and only one instance during the life of the application., In practice[ref]By &quot;practice&quot; I mean in WordPress development in particular. &nbsp;WordPress is written in PHP, and PHP is by nature runs as a single thread. &nbsp;If you&#39;re dealing with a more dynamic, multi-threaded&nbsp;environment, the practices will differ significantly. &nbsp;I will rarely ever argue that a Singleton is the right use case in a multi-threaded .Net application, for example, but there are still situations where it&#39;s a useful pattern.[/ref] Singletons are used all over. &nbsp;Think of every time you&#39;ve used the [cci]global[/cci] keyword when working in WordPress. &nbsp;Not for Posts, which are atomic objects, but for framework-wide constructs like [cci]$wpdb[/cci] and [cci]$wp_rewrite[/cci]. These objects don&#39;t actually implement a Singleton design pattern, but for all intents and purposes they fit our definition. &nbsp;These are objects that are (typically) only instantiated once during the lifetime of a WordPress request-response cycle. &nbsp;You never call [cci]new wpdb()[/cci] in your themes and plugins; instead you make a reference to the [cci]global $wpdb[/cci] object that WordPress set up for you.[ref]In reality, you can (and will) call [cci]new wpdb()[/cci] if you are trying to connect to a new database. This is rare, though, and I was trying to find an example of a class most people use that already follows a Singleton pattern. In the majority of cases, you aren&#39;t connecting to a new database, so the [cci]new[/cci] keyword never appears in the context of the WP database object.[/ref] The Singleton model exists to protect you from memory bloat. &nbsp;In most cases, you never want more than one connection to the database open at any given time - so there&#39;s only one instance of the database object during the request. &nbsp;It also protects you from instantiating multiple copies of objects that are expensive to construct - it makes no sense to have multiple instances of the [cci]WP_Rewrite[/cci] class lying around. Why All the Hate? Still, Singletons are considered an &quot;anti-pattern&quot; by many developers. &nbsp;They claim it&#39;s an overused pattern that&#39;s misused by too many developers. &nbsp;True, it can be misused, but so can Axe body spray and words like YOLO. &nbsp;Overuse doesn&#39;t make them&nbsp;wrong per se, you just need to be very judicious in when, where, why, and how you use them. In some applications, Singletons are a horrible idea. &nbsp;They introduce the idea of a global state into the application - and that state can bleed across threads in multi-threaded, persistent applications. &nbsp;This means one request can inadvertently affect another. &nbsp;For stateless (REST) web services, this can lead to many a sleepless night. As a result, most developers will see &quot;Singleton&quot; and immediately think &quot;bad.&quot; &nbsp;They&#39;ve been trained to avoid the pattern and will summarily reject it if you suggest using a Singleton. When It Makes Sense As I&#39;ve already pointed out, WordPress already uses singly-instantiated objects that are placed in the global scope. &nbsp;So apparently it makes sense to at least a handful of people. I&#39;ve also used a Singleton as the backbone for my [cci]WP_Session[/cci] object. &nbsp;It&#39;s instantiated lazily (meaning only when you actually access it rather than when the class file is included by WordPress), and lives for the entire request. &nbsp;This is an object I&#39;ll used as a great example of why the Singleton pattern makes sense. I work on WordPress, but I&#39;m not the only developer. &nbsp;My code touches a few aspects of the application, like the XML-RPC system, the [cci]WP_Http[/cci] class, and certain other tiny elements. &nbsp;But WordPress itself is a huge application, with hundreds of contributors and maintainers. &nbsp;We have a few set of coding guidelines, but there&#39;s no guarantee everyone will write their code exactly the same time. So while&nbsp;I might only instantiate [cci]WP_Session[/cci] once, there&#39;s no guarantee other developers will respect that. &nbsp;Not in core, and certainly not in plugins. &nbsp;If the class could be instantiated multiple times, all it would take is one extra call to [cci]new WP_Session[/cci] to muck things up. Also, once I&#39;ve instantiated the class, since it&#39;s an object I intend for other developers to use, I have to place a reference to it in the global scope so their code can access the same instance. &nbsp;So, ultimately, there are two patterns I can follow to set up a single instance of [cci]WP_Session[/cci] for the request: class WP_Session { // Pray that this is only ever called by me public function __construct() { } }&lt;/p&gt; // Heavily document that this var shouldn&#39;t be abused global $wp_session; $wp_session = new WP_Session();&lt;/code&gt; Or using a Singleton - a static [cci]get_instance()[/cci] method will return the current instance, and the private constructor&nbsp;cannot be called outside of the class. class WP_Session { private static $instance;&lt;/p&gt; public static function get_instance() { if ( ! self::$instance ) { self::$instance = new self(); } return self::$instance; } private function __construct() { } } $wp_session = WP_Session::get_instance();&lt;/code&gt; What About Dependency Injection? This is the single greatest argument&nbsp;against Singletons that I&#39;ve heard. &nbsp;On Twitter, over email, and even on Stack Overflow I&#39;ve seen people arguing that dependency injection is a suitable replacement for the Singleton pattern. They&#39;re wrong. Dependency injection is a pattern that encourages you to abstract your dependencies so you can substitute mock objects in your code. &nbsp;Consider the following pseudo-code example: class Logger { var $persist;&lt;/p&gt; function __construct() { $this-&gt;persist = new FileSystemWriter( &#39;log.txt&#39; ); } function write( $event ) { $this-&gt;persist-&gt;save( $event ); } } $logger = new Logger();&lt;/code&gt; This kind of code would run just fine. &nbsp;However, you are stuck between a rock and a hard place should you need to change your code. &nbsp;If you want to change your application to log in a database rather than to the filesystem, you need to rewrite both your business logic code&nbsp;and your data persistence layer. &nbsp;Consider instead the following code: class Logger { var $persist;&lt;/p&gt; function __construct( $engine ) { $this-&gt;persist = $engine; } function write( $event ) { $this-&gt;persist-&gt;save( $event ); } } $fileEngine = new FileSystemWriter( &#39;log.txt&#39; ); $logger = new Logger( $fileEngine );&lt;/code&gt; Now, when you change your application, you just change the data persistence layer since you&#39;re passing the persistence object directly to the logic layer. &nbsp;Your code is highly decoupled and you can move forward with blissful flexibility. &nbsp;Dependency injection is truly an amazing paradigm to work within,&nbsp;but it does not solve the problems solved by Singletons. Unit Testing The biggest argument against Singletons - and where the misguided rants about dependency injection come from - is rooted in unit testing. When you&#39;re unit testing an application, each test should be completely isolated from every other test. &nbsp;Singletons make this difficult, since they introduce a global state for the application that must be managed in between each test. &nbsp;When you&#39;re working with other stateful objects in a testing environment (i.e. a database), you use dependency injection to introduce a mock object that implements a similar interface, but with stateless behavior. Basically, the mock object allows you to start every test with a clean slate. To unit test with Singletons, you have to do two things: Have the Singleton implement a standard interface that you can mock in your tests, then use dependency injection to inject the&nbsp;Singleton inside the application Implement a [cci]reset()[/cci] method within your Singleton that flushes the stored class instance The first step allows you to test your code that depends on the Singleton object without actually using the Singleton itself. class User { var $session;&lt;/p&gt; function __construct( $session ) { $this-&gt;session = $session; } function save_meta( $key, $value ) { $session[$key] = $value; } } $user = new User( WP_Session::get_instance() );&lt;/code&gt; The second step allows you to test the Singleton in isolation - just call [cci]Singleton::reset()[/cci] at the beginning of your test to ensure you&#39;re starting with a null state, then call it again at the end of the test to clean up after yourself. &nbsp;It&#39;s not the prettiest way to do things, but PHPUnit doesn&#39;t currently have per-test setup/teardown functionality. Conclusions Singletons are one of the most misunderstood constructs in software development. &nbsp;In most modern (read: multi-threaded) environments, their overuse has resulted in almost universal disgust for the pattern. &nbsp;However, in single-threaded, multi-developer systems - like WordPress - they serve an important and necessary purpose. &nbsp;Singletons allow you to maintain global, singly-instantiated objects in a particular request, keeping memory clean and optimizing your application through heavy operations (i.e. database or filesystem access). Singletons can be tricky to use in a unit test environment, but it&#39;s not impossible to test code that uses the pattern. &nbsp;Don&#39;t jump the gun and assume, just because hoards of developers on Stack Overflow dislike something, that it&#39;s a bad thing. &nbsp;Singletons have their place; you just need to learn how to use them properly." />
<meta property="og:site_name" content="Things that Matter Most" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2012-12-28T07:00:16-08:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="The Case for Singletons in WordPress" />
<meta name="twitter:site" content="@" />
<script type="application/ld+json">
{"@type":"BlogPosting","headline":"The Case for Singletons in WordPress","dateModified":"2012-12-28T07:00:16-08:00","datePublished":"2012-12-28T07:00:16-08:00","mainEntityOfPage":{"@type":"WebPage","@id":"/tech/the-case-for-singletons/"},"url":"/tech/the-case-for-singletons/","description":"Please also review my follow-up post, Making Singletons Safe in PHP. There has been a lot of discussion this week regarding the Singleton pattern and whether or not it has a place in modern software development. &nbsp;Mike Schinkel wrote a tutorial about a Singleton factory. &nbsp;I wrote one about using Singletons as a WordPress plugin scaffold. &nbsp;Then the conversation bled over to Twitter and people questioned whether or not it was a sound development pattern at all. I would argue that Singletons are not just useful, but are&nbsp;necessary for robust software development. The Singleton Model To understand&nbsp;why I claim Singletons are necessary, we first have to agree on a definition of &quot;Singleton.&quot; A Singleton is a class for which there can exist one and only one instance during the life of the application., In practice[ref]By &quot;practice&quot; I mean in WordPress development in particular. &nbsp;WordPress is written in PHP, and PHP is by nature runs as a single thread. &nbsp;If you&#39;re dealing with a more dynamic, multi-threaded&nbsp;environment, the practices will differ significantly. &nbsp;I will rarely ever argue that a Singleton is the right use case in a multi-threaded .Net application, for example, but there are still situations where it&#39;s a useful pattern.[/ref] Singletons are used all over. &nbsp;Think of every time you&#39;ve used the [cci]global[/cci] keyword when working in WordPress. &nbsp;Not for Posts, which are atomic objects, but for framework-wide constructs like [cci]$wpdb[/cci] and [cci]$wp_rewrite[/cci]. These objects don&#39;t actually implement a Singleton design pattern, but for all intents and purposes they fit our definition. &nbsp;These are objects that are (typically) only instantiated once during the lifetime of a WordPress request-response cycle. &nbsp;You never call [cci]new wpdb()[/cci] in your themes and plugins; instead you make a reference to the [cci]global $wpdb[/cci] object that WordPress set up for you.[ref]In reality, you can (and will) call [cci]new wpdb()[/cci] if you are trying to connect to a new database. This is rare, though, and I was trying to find an example of a class most people use that already follows a Singleton pattern. In the majority of cases, you aren&#39;t connecting to a new database, so the [cci]new[/cci] keyword never appears in the context of the WP database object.[/ref] The Singleton model exists to protect you from memory bloat. &nbsp;In most cases, you never want more than one connection to the database open at any given time - so there&#39;s only one instance of the database object during the request. &nbsp;It also protects you from instantiating multiple copies of objects that are expensive to construct - it makes no sense to have multiple instances of the [cci]WP_Rewrite[/cci] class lying around. Why All the Hate? Still, Singletons are considered an &quot;anti-pattern&quot; by many developers. &nbsp;They claim it&#39;s an overused pattern that&#39;s misused by too many developers. &nbsp;True, it can be misused, but so can Axe body spray and words like YOLO. &nbsp;Overuse doesn&#39;t make them&nbsp;wrong per se, you just need to be very judicious in when, where, why, and how you use them. In some applications, Singletons are a horrible idea. &nbsp;They introduce the idea of a global state into the application - and that state can bleed across threads in multi-threaded, persistent applications. &nbsp;This means one request can inadvertently affect another. &nbsp;For stateless (REST) web services, this can lead to many a sleepless night. As a result, most developers will see &quot;Singleton&quot; and immediately think &quot;bad.&quot; &nbsp;They&#39;ve been trained to avoid the pattern and will summarily reject it if you suggest using a Singleton. When It Makes Sense As I&#39;ve already pointed out, WordPress already uses singly-instantiated objects that are placed in the global scope. &nbsp;So apparently it makes sense to at least a handful of people. I&#39;ve also used a Singleton as the backbone for my [cci]WP_Session[/cci] object. &nbsp;It&#39;s instantiated lazily (meaning only when you actually access it rather than when the class file is included by WordPress), and lives for the entire request. &nbsp;This is an object I&#39;ll used as a great example of why the Singleton pattern makes sense. I work on WordPress, but I&#39;m not the only developer. &nbsp;My code touches a few aspects of the application, like the XML-RPC system, the [cci]WP_Http[/cci] class, and certain other tiny elements. &nbsp;But WordPress itself is a huge application, with hundreds of contributors and maintainers. &nbsp;We have a few set of coding guidelines, but there&#39;s no guarantee everyone will write their code exactly the same time. So while&nbsp;I might only instantiate [cci]WP_Session[/cci] once, there&#39;s no guarantee other developers will respect that. &nbsp;Not in core, and certainly not in plugins. &nbsp;If the class could be instantiated multiple times, all it would take is one extra call to [cci]new WP_Session[/cci] to muck things up. Also, once I&#39;ve instantiated the class, since it&#39;s an object I intend for other developers to use, I have to place a reference to it in the global scope so their code can access the same instance. &nbsp;So, ultimately, there are two patterns I can follow to set up a single instance of [cci]WP_Session[/cci] for the request: class WP_Session { // Pray that this is only ever called by me public function __construct() { } }&lt;/p&gt; // Heavily document that this var shouldn&#39;t be abused global $wp_session; $wp_session = new WP_Session();&lt;/code&gt; Or using a Singleton - a static [cci]get_instance()[/cci] method will return the current instance, and the private constructor&nbsp;cannot be called outside of the class. class WP_Session { private static $instance;&lt;/p&gt; public static function get_instance() { if ( ! self::$instance ) { self::$instance = new self(); } return self::$instance; } private function __construct() { } } $wp_session = WP_Session::get_instance();&lt;/code&gt; What About Dependency Injection? This is the single greatest argument&nbsp;against Singletons that I&#39;ve heard. &nbsp;On Twitter, over email, and even on Stack Overflow I&#39;ve seen people arguing that dependency injection is a suitable replacement for the Singleton pattern. They&#39;re wrong. Dependency injection is a pattern that encourages you to abstract your dependencies so you can substitute mock objects in your code. &nbsp;Consider the following pseudo-code example: class Logger { var $persist;&lt;/p&gt; function __construct() { $this-&gt;persist = new FileSystemWriter( &#39;log.txt&#39; ); } function write( $event ) { $this-&gt;persist-&gt;save( $event ); } } $logger = new Logger();&lt;/code&gt; This kind of code would run just fine. &nbsp;However, you are stuck between a rock and a hard place should you need to change your code. &nbsp;If you want to change your application to log in a database rather than to the filesystem, you need to rewrite both your business logic code&nbsp;and your data persistence layer. &nbsp;Consider instead the following code: class Logger { var $persist;&lt;/p&gt; function __construct( $engine ) { $this-&gt;persist = $engine; } function write( $event ) { $this-&gt;persist-&gt;save( $event ); } } $fileEngine = new FileSystemWriter( &#39;log.txt&#39; ); $logger = new Logger( $fileEngine );&lt;/code&gt; Now, when you change your application, you just change the data persistence layer since you&#39;re passing the persistence object directly to the logic layer. &nbsp;Your code is highly decoupled and you can move forward with blissful flexibility. &nbsp;Dependency injection is truly an amazing paradigm to work within,&nbsp;but it does not solve the problems solved by Singletons. Unit Testing The biggest argument against Singletons - and where the misguided rants about dependency injection come from - is rooted in unit testing. When you&#39;re unit testing an application, each test should be completely isolated from every other test. &nbsp;Singletons make this difficult, since they introduce a global state for the application that must be managed in between each test. &nbsp;When you&#39;re working with other stateful objects in a testing environment (i.e. a database), you use dependency injection to introduce a mock object that implements a similar interface, but with stateless behavior. Basically, the mock object allows you to start every test with a clean slate. To unit test with Singletons, you have to do two things: Have the Singleton implement a standard interface that you can mock in your tests, then use dependency injection to inject the&nbsp;Singleton inside the application Implement a [cci]reset()[/cci] method within your Singleton that flushes the stored class instance The first step allows you to test your code that depends on the Singleton object without actually using the Singleton itself. class User { var $session;&lt;/p&gt; function __construct( $session ) { $this-&gt;session = $session; } function save_meta( $key, $value ) { $session[$key] = $value; } } $user = new User( WP_Session::get_instance() );&lt;/code&gt; The second step allows you to test the Singleton in isolation - just call [cci]Singleton::reset()[/cci] at the beginning of your test to ensure you&#39;re starting with a null state, then call it again at the end of the test to clean up after yourself. &nbsp;It&#39;s not the prettiest way to do things, but PHPUnit doesn&#39;t currently have per-test setup/teardown functionality. Conclusions Singletons are one of the most misunderstood constructs in software development. &nbsp;In most modern (read: multi-threaded) environments, their overuse has resulted in almost universal disgust for the pattern. &nbsp;However, in single-threaded, multi-developer systems - like WordPress - they serve an important and necessary purpose. &nbsp;Singletons allow you to maintain global, singly-instantiated objects in a particular request, keeping memory clean and optimizing your application through heavy operations (i.e. database or filesystem access). Singletons can be tricky to use in a unit test environment, but it&#39;s not impossible to test code that uses the pattern. &nbsp;Don&#39;t jump the gun and assume, just because hoards of developers on Stack Overflow dislike something, that it&#39;s a bad thing. &nbsp;Singletons have their place; you just need to learn how to use them properly.","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

    

    <!-- Site Favicon -->
    <link rel="shortcut icon" href="/assets/images/favicon.ico" type="image/png" />

    <!-- Font Embed Code -->
	<link href="https://fonts.googleapis.com/css?family=Crimson+Text:400,400i,600,600i|Karla:400,400i,700,700i" rel="stylesheet">

    <!-- CSS Styles -->
    <link href="/assets/css/style.css" rel="stylesheet">
</head>



<body class="layout-post">
    <div id="page" class="site">
        <header id="masthead" class="site-header">
    <div class="site-header-wrap">
        <div class="site-header-inside">

            <div class="site-branding">
                
                <p class="profile">
                    <a href="/">
                        <img src="/assets/images/authorimage.jpg" alt="'s Picture"
                            class="avatar" />
                    </a>
                </p>
                <div class="site-identity">
                    
                    <h1 class="site-title">
                        <a href="/">Things that Matter Most</a>
                    </h1>
                    
                    
                    <p class="site-description">Things that Matter Most</p>
                    
                </div><!-- .site-identity -->
                
                <button id="menu-toggle" class="menu-toggle"><span class="screen-reader-text">Main Menu</span><span
                        class="icon-menu" aria-hidden="true"></span></button>
            </div><!-- .site-branding -->

            <nav id="main-navigation" class="site-navigation" aria-label="Main Navigation">
                <div class="site-nav-wrap">
                    <div class="site-nav-inside">
                    <ul class="menu">
                        
                        
                        
                        <li class="menu-item "><a href="/">Home</a></li>
                        
                        
                        
                        <li class="menu-item "><a href="/about">About</a></li>
                        
                        
                        
                        <li class="menu-item "><a href="/contact">Contact Me</a></li>
                        
                        
                        
                        <li class="menu-item "><a href="/search">Search</a></li>
                        
                    </ul>
                    <p class="social-links">
    
    <a href="https://twitter.com/ericmann" target="_blank">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
<!--
Font Awesome Free 5.5.0 by @fontawesome - https://fontawesome.com
License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
-->
    </a>
    
    
    
    <a href="https://github.com/ericmann" target="_blank">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
<!--
Font Awesome Free 5.5.0 by @fontawesome - https://fontawesome.com
License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
-->
    </a>
    
    
    
    
    
    
    
    <a href="https://www.linkedin.com/in/ericallenmann" target="_blank">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg>
<!--
Font Awesome Free 5.5.0 by @fontawesome - https://fontawesome.com
License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
-->
    </a>
    
    
    
</p>
                    </div><!-- .site-nav-inside -->
                </div><!-- .site-nav-wrap -->
            </nav><!-- .site-navigation -->

        </div><!-- .site-header-inside -->
    </div><!-- .site-header-wrap -->
</header><!-- .site-header -->
        <div id="content" class="site-content fadeInDown delay_075s">
            <div class="inner-wide">
                <main id="main" class="site-main">

    <article class="post-full inner">

        <header class="post-header">
            <div class="post-meta">
                <time class="post-date" datetime="2012-12-28">
                    December 28, 2012
                </time>
            </div><!-- .post-meta -->
            <h1 class="post-title">The Case for Singletons in WordPress</h1>
        </header><!-- .post-header -->

        
        <div class="post-content">
            <p style="text-align:center;font-size:0.8em;"><em>Please also review my follow-up post, <a href="https://ttmm.io/tech/making-singletons-safe-in-php/" title="Making Singletons Safe in PHP">Making Singletons Safe in PHP</a>.</em></p>
<p>There has been a lot of discussion this week regarding the Singleton pattern and whether or not it has a place in modern software development. &nbsp;<a title="Enabling Action and Filter Hook Removal from Class-based WordPress Plugins" href="http://hardcorewp.com/2012/enabling-action-and-filter-hook-removal-from-class-based-wordpress-plugins/">Mike Schinkel wrote a tutorial about a Singleton factory</a>. &nbsp;<a title="Functions and Classes and Singletons, Oh My!" href="https://ttmm.io/tutorial/wordpress-plugin-structure/">I wrote one about using Singletons as a WordPress plugin scaffold</a>. &nbsp;Then the conversation <a title="Twitter - Part 1" href="http://twitter.com/EricMann/status/284350904524754945">bled</a> <a title="Twitter - Part 2" href="http://twitter.com/EricMann/status/284492563342323712">over to Twitter</a> and people questioned whether or not it was a sound development pattern at all.</p>
<p>I would argue that Singletons are not just useful, but are&nbsp;<em>necessary</em> for robust software development.<br />
<!--more--></p>
<h2>The Singleton Model</h2>
<p>To understand&nbsp;<em>why</em> I claim Singletons are necessary, we first have to agree on a definition of "Singleton."</p>
<blockquote><p>A Singleton is a class for which there can exist one and only one instance during the life of the application.,</p></blockquote>
<p>In practice[ref]By "practice" I mean in WordPress development in particular. &nbsp;WordPress is written in PHP, and PHP is by nature runs as a single thread. &nbsp;If you're dealing with a more dynamic, multi-threaded&nbsp;environment, the practices will differ significantly. &nbsp;I will rarely ever argue that a Singleton is the right use case in a multi-threaded .Net application, for example, but there are still situations where it's a useful pattern.[/ref] Singletons are used all over. &nbsp;Think of every time you've used the [cci]global[/cci] keyword when working in WordPress. &nbsp;Not for Posts, which are atomic objects, but for framework-wide constructs like [cci]$wpdb[/cci] and [cci]$wp_rewrite[/cci].</p>
<p>These objects don't actually implement a Singleton design pattern, but <em>for all intents and purposes</em> they fit our definition. &nbsp;These are objects that are (typically) only instantiated once during the lifetime of a WordPress request-response cycle. &nbsp;You never call [cci]new wpdb()[/cci] in your themes and plugins; instead you make a reference to the [cci]global $wpdb[/cci] object that WordPress set up for you.[ref]In reality, you can (and will) call [cci]new wpdb()[/cci] if you are trying to connect to a new database. This is rare, though, and I was trying to find an example of a class most people use that already follows a Singleton pattern.  In the majority of cases, you aren't connecting to a new database, so the [cci]new[/cci] keyword never appears in the context of the WP database object.[/ref]</p>
<p>The Singleton model exists to protect you from memory bloat. &nbsp;In most cases, you never want more than one connection to the database open at any given time - so there's only one instance of the database object during the request. &nbsp;It also protects you from instantiating multiple copies of objects that are expensive to construct - it makes no sense to have multiple instances of the [cci]WP_Rewrite[/cci] class lying around.</p>
<h2>Why All the Hate?</h2>
<p>Still, Singletons are considered an "anti-pattern" by many developers. &nbsp;They claim it's an overused pattern that's misused by too many developers. &nbsp;True, it can be misused, but so can Axe body spray and words like YOLO. &nbsp;Overuse doesn't make them&nbsp;<em>wrong</em> per se, you just need to be very judicious in when, where, why, and how you use them.</p>
<p>In some applications, Singletons are a horrible idea. &nbsp;They introduce the idea of a global state into the application - and that state can bleed across threads in multi-threaded, persistent applications. &nbsp;This means one request can inadvertently affect another. &nbsp;For stateless (REST) web services, this can lead to many a sleepless night.</p>
<p>As a result, most developers will see "Singleton" and immediately think "bad." &nbsp;They've been trained to avoid the pattern and will summarily reject it if you suggest using a Singleton.</p>
<h2>When It Makes Sense</h2>
<p>As I've already pointed out, WordPress already uses singly-instantiated objects that are placed in the global scope. &nbsp;So apparently it makes sense to at least a handful of people.</p>
<p>I've also used a Singleton as the backbone for my <a title="Introducing WP_Session" href="http://eamann.com/tech/introducing-wp_session/">[cci]WP_Session[/cci]</a> object. &nbsp;It's instantiated lazily (meaning only when you actually access it rather than when the class file is included by WordPress), and lives for the entire request. &nbsp;This is an object I'll used as a great example of <i>why</i> the Singleton pattern makes sense.</p>
<p>I work on WordPress, but I'm not the only developer. &nbsp;My code touches a few aspects of the application, like the XML-RPC system, the [cci]WP_Http[/cci] class, and certain other tiny elements. &nbsp;But WordPress itself is a huge application, with hundreds of contributors and maintainers. &nbsp;We have a few set of coding guidelines, but there's no guarantee everyone will write their code exactly the same time.</p>
<p>So while&nbsp;<em>I</em> might only instantiate [cci]WP_Session[/cci] once, there's no guarantee other developers will respect that. &nbsp;Not in core, and certainly not in plugins. &nbsp;If the class could be instantiated multiple times, all it would take is one extra call to [cci]new WP_Session[/cci] to muck things up.</p>
<p>Also, once I've instantiated the class, since it's an object I intend for other developers to use, I have to place a reference to it in the global scope so their code can access the same instance. &nbsp;So, ultimately, there are two patterns I can follow to set up a single instance of [cci]WP_Session[/cci] for the request:</p>
<p><code lang="php">class WP_Session {<br />
  // Pray that this is only ever called by me<br />
  public function __construct() { }<br />
}</p>
<p>// Heavily document that this var shouldn't be abused<br />
global $wp_session;<br />
$wp_session = new WP_Session();</code></p>
<p>Or using a Singleton - a static [cci]get_instance()[/cci] method will return the current instance, and the private constructor&nbsp;<em>cannot be called outside of the class</em>.</p>
<p><code lang="php">class WP_Session {<br />
  private static $instance;</p>
<p>public static function get_instance() {<br />
    if ( ! self::$instance ) {<br />
      self::$instance = new self();<br />
    }<br />
    return self::$instance;<br />
  }</p>
<p>private function __construct() { }<br />
}</p>
<p>$wp_session = WP_Session::get_instance();</code></p>
<h2>What About Dependency Injection?</h2>
<p>This is the single greatest argument&nbsp;<em>against</em> Singletons that I've heard. &nbsp;On Twitter, over email, and even on Stack Overflow I've seen people arguing that dependency injection is a suitable replacement for the Singleton pattern.</p>
<p>They're wrong.</p>
<p>Dependency injection is a pattern that encourages you to abstract your dependencies so you can substitute mock objects in your code. &nbsp;Consider the following pseudo-code example:</p>
<p><code lang="php">class Logger {<br />
  var $persist;</p>
<p>function __construct() {<br />
    $this->persist = new FileSystemWriter( 'log.txt' );<br />
  }</p>
<p>function write( $event ) {<br />
    $this->persist->save( $event );<br />
  }<br />
}</p>
<p>$logger = new Logger();</code></p>
<p>This kind of code would run just fine. &nbsp;However, you are stuck between a rock and a hard place should you need to change your code. &nbsp;If you want to change your application to log in a database rather than to the filesystem, you need to rewrite both your business logic code&nbsp;<em>and</em> your data persistence layer. &nbsp;Consider instead the following code:</p>
<p><code lang="php">class Logger {<br />
  var $persist;</p>
<p>function __construct( $engine ) {<br />
    $this->persist = $engine;<br />
  }</p>
<p>function write( $event ) {<br />
    $this->persist->save( $event );<br />
  }<br />
}</p>
<p>$fileEngine = new FileSystemWriter( 'log.txt' );<br />
$logger = new Logger( $fileEngine );</code></p>
<p>Now, when you change your application, you just change the data persistence layer since you're passing the persistence object directly to the logic layer. &nbsp;Your code is highly decoupled and you can move forward with blissful flexibility. &nbsp;Dependency injection is truly an amazing paradigm to work within,&nbsp;<em>but it does not solve the problems solved by Singletons</em>.</p>
<h2>Unit Testing</h2>
<p>The biggest argument against Singletons - and where the misguided rants about dependency injection come from - is rooted in unit testing.</p>
<p>When you're unit testing an application, each test should be completely isolated from every other test. &nbsp;Singletons make this difficult, since they introduce a global state for the application that must be managed in between each test. &nbsp;When you're working with other stateful objects in a testing environment (i.e. a database), you use dependency injection to introduce a mock object that implements a similar interface, but with stateless behavior.</p>
<p>Basically, the mock object allows you to start every test with a clean slate.</p>
<p>To unit test with Singletons, you have to do two things:</p>
<ol>
<li><span style="line-height: 13px">Have the Singleton implement a standard interface that you can mock in your tests, then use dependency injection to inject the&nbsp;<em>Singleton</em> inside the application</span></li>
<li>Implement a [cci]reset()[/cci] method within your Singleton that flushes the stored class instance</li>
</ol>
<p>The first step allows you to test your code that depends on the Singleton object without actually using the Singleton itself.</p>
<p><code lang="php">class User {<br />
  var $session;</p>
<p>function __construct( $session ) {<br />
    $this->session = $session;<br />
  }</p>
<p>function save_meta( $key, $value ) {<br />
    $session[$key] = $value;<br />
  }<br />
}</p>
<p>$user = new User( WP_Session::get_instance() );</code></p>
<p>The second step allows you to test the Singleton in isolation - just call [cci]Singleton::reset()[/cci] at the beginning of your test to ensure you're starting with a null state, then call it again at the end of the test to clean up after yourself. &nbsp;It's not the prettiest way to do things, but PHPUnit doesn't currently have per-test setup/teardown functionality.</p>
<h2>Conclusions</h2>
<p>Singletons are one of the most misunderstood constructs in software development. &nbsp;In most modern (read: multi-threaded) environments, their overuse has resulted in almost universal disgust for the pattern. &nbsp;However, in single-threaded, multi-developer systems - like WordPress - they serve an important and necessary purpose. &nbsp;Singletons allow you to maintain global, singly-instantiated objects in a particular request, keeping memory clean and optimizing your application through heavy operations (i.e. database or filesystem access).</p>
<p>Singletons can be tricky to use in a unit test environment, but it's not impossible to test code that uses the pattern. &nbsp;Don't jump the gun and assume, just because hoards of developers on Stack Overflow dislike something, that it's a bad thing. &nbsp;Singletons have their place; you just need to learn how to use them properly.</p>

        </div>
        <footer class="post-footer">
            <div class="post-share">
                <span class="post-share-title">Share:</span>
                <a target="_blank"
                    href="https://twitter.com/share?text=The+Case+for+Singletons+in+WordPress&amp;url=https://ttmm.iotech/the-case-for-singletons/">Twitter</a>
                <a target="_blank"
                    href="https://www.facebook.com/sharer/sharer.php?u=https://ttmm.iotech/the-case-for-singletons/">Facebook</a>
            </div><!-- .share-post -->
            
            <p class="post-cats">
                <span class="post-share-title">Filed under </span>
                <a href="/categories/index.html#Technology"
                    rel="category">Technology</a>
                
            </p>
            
            
            <p class="post-tags">
                <span class="post-share-title">Tagged with </span>
                <a href="/tags/index.html#Computer+Programming"
                    rel="tag">Computer Programming</a>
                <a href="/tags/index.html#Dependency"
                    rel="tag">Dependency</a>
                <a href="/tags/index.html#Dependency+Injection"
                    rel="tag">Dependency Injection</a>
                <a href="/tags/index.html#design+pattern"
                    rel="tag">design pattern</a>
                <a href="/tags/index.html#Developer"
                    rel="tag">Developer</a>
                <a href="/tags/index.html#Object"
                    rel="tag">Object</a>
                <a href="/tags/index.html#singleton"
                    rel="tag">singleton</a>
                <a href="/tags/index.html#Singleton+Pattern"
                    rel="tag">Singleton Pattern</a>
                <a href="/tags/index.html#software"
                    rel="tag">software</a>
                <a href="/tags/index.html#WordPress"
                    rel="tag">WordPress</a>
                <a href="/tags/index.html#You%27re"
                    rel="tag">You're</a>
                
            </p>
            
        </footer>
        
    </article>
    
    <section class="read-next inner">
        <h2 class="read-next-title">Read Next</h2>
        
        <article class="post">
            <header class="post-header">
                <div class="post-meta">
                    <time class="published" datetime="December 27, 2012">December 27, 2012</time>
                </div>
                <h3 class="post-title"><a href="/php/wordpress-plugin-structure/">WordPress Plugin Structure</a>
                </h3>
            </header>
        </article>
        
        
        <article class="post">
            <header class="post-header">
                <div class="post-meta">
                    <time class="published" datetime="January 7, 2013">January 7, 2013</time>
                </div>
                <h3 class="post-title"><a href="/faith/podcast-episode-1/">Podcast</a></h3>
            </header>
        </article>
        
    </section><!-- .read-next -->

</main><!-- .site-main -->


                

                
                <footer id="colophon" class="site-footer">
    <p class="site-info inner">
        <a href="#">Things that Matter Most</a> &copy; 2021. Royce theme by
        <a target="_blank" href="https://justgoodthemes.com/">JustGoodThemes</a>.
        <br />
        Powered by <a target="_blank" href="https://jekyllrb.com/">Jekyll</a>.
    </p>
    <a id="back-to-top" class="back-to-top" href="#page">
        <span class="icon-arrow-up" aria-hidden="true"></span>
        <span class="screen-reader-text">Back to top</span>
    </a>
</footer><!-- .site-footer -->
            </div><!-- .inner-wide -->
        </div><!-- .site-content -->
    </div><!-- .site -->

    
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-4156949-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-4156949-6', { 'anonymize_ip': true });
  </script>

    <!-- Javascript Assets -->
    <script src="/assets/js/jquery-3.3.1.min.js"></script>
    <script src="/assets/js/plugins.js"></script>
    <script src="/assets/js/custom.js"></script>

</body>

</html>