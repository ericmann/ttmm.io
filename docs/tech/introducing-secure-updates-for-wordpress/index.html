<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    
        <!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Introducing Secure Updates for WordPress | Things that Matter Most</title>
<meta name="generator" content="Jekyll v3.9.0" />
<meta property="og:title" content="Introducing Secure Updates for WordPress" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Today I introduce the a new plugin that provides secure updates for WordPress: DGXPCO." />
<meta property="og:description" content="Today I introduce the a new plugin that provides secure updates for WordPress: DGXPCO." />
<meta property="og:site_name" content="Things that Matter Most" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-02-26T05:00:53-08:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Introducing Secure Updates for WordPress" />
<meta name="twitter:site" content="@" />
<script type="application/ld+json">
{"@type":"BlogPosting","headline":"Introducing Secure Updates for WordPress","dateModified":"2018-02-26T05:00:53-08:00","datePublished":"2018-02-26T05:00:53-08:00","mainEntityOfPage":{"@type":"WebPage","@id":"/tech/introducing-secure-updates-for-wordpress/"},"url":"/tech/introducing-secure-updates-for-wordpress/","description":"Today I introduce the a new plugin that provides secure updates for WordPress: DGXPCO.","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

    

    <!-- Site Favicon -->
    <link rel="shortcut icon" href="/assets/images/favicon.ico" type="image/png" />

    <!-- Font Embed Code -->
	<link href="https://fonts.googleapis.com/css?family=Crimson+Text:400,400i,600,600i|Karla:400,400i,700,700i" rel="stylesheet">

    <!-- CSS Styles -->
    <link href="/assets/css/style.css" rel="stylesheet">
</head>



<body class="layout-post">
    <div id="page" class="site">
        <header id="masthead" class="site-header">
    <div class="site-header-wrap">
        <div class="site-header-inside">

            <div class="site-branding">
                
                <p class="profile">
                    <a href="/">
                        <img src="/assets/images/authorimage.jpg" alt="'s Picture"
                            class="avatar" />
                    </a>
                </p>
                <div class="site-identity">
                    
                    <h1 class="site-title">
                        <a href="/">Things that Matter Most</a>
                    </h1>
                    
                    
                    <p class="site-description">Things that Matter Most</p>
                    
                </div><!-- .site-identity -->
                
                <button id="menu-toggle" class="menu-toggle"><span class="screen-reader-text">Main Menu</span><span
                        class="icon-menu" aria-hidden="true"></span></button>
            </div><!-- .site-branding -->

            <nav id="main-navigation" class="site-navigation" aria-label="Main Navigation">
                <div class="site-nav-wrap">
                    <div class="site-nav-inside">
                    <ul class="menu">
                        
                        
                        
                        <li class="menu-item "><a href="/">Home</a></li>
                        
                        
                        
                        <li class="menu-item "><a href="/about">About</a></li>
                        
                        
                        
                        <li class="menu-item "><a href="/contact">Contact Me</a></li>
                        
                        
                        
                        <li class="menu-item "><a href="/search">Search</a></li>
                        
                    </ul>
                    <p class="social-links">
    
    <a href="https://twitter.com/ericmann" target="_blank">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
<!--
Font Awesome Free 5.5.0 by @fontawesome - https://fontawesome.com
License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
-->
    </a>
    
    
    
    <a href="https://github.com/ericmann" target="_blank">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
<!--
Font Awesome Free 5.5.0 by @fontawesome - https://fontawesome.com
License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
-->
    </a>
    
    
    
    
    
    
    
    <a href="https://www.linkedin.com/in/ericallenmann" target="_blank">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg>
<!--
Font Awesome Free 5.5.0 by @fontawesome - https://fontawesome.com
License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
-->
    </a>
    
    
    
</p>
                    </div><!-- .site-nav-inside -->
                </div><!-- .site-nav-wrap -->
            </nav><!-- .site-navigation -->

        </div><!-- .site-header-inside -->
    </div><!-- .site-header-wrap -->
</header><!-- .site-header -->
        <div id="content" class="site-content fadeInDown delay_075s">
            <div class="inner-wide">
                <main id="main" class="site-main">

    <article class="post-full inner">

        <header class="post-header">
            <div class="post-meta">
                <time class="post-date" datetime="2018-02-26">
                    February 26, 2018
                </time>
            </div><!-- .post-meta -->
            <h1 class="post-title">Introducing Secure Updates for WordPress</h1>
        </header><!-- .post-header -->

        
        <div class="post-content">
            <p><!-- wp:paragraph {"align":"center"} --></p>
<p style="text-align: center;"><em><a href="#announcement">Skip to the announcement ...</a></em></p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --><br />
One of the earliest conversations I had in the WordPress community almost saw me immediately leave and never return. I'd released some code in a few plugins and was just finally starting to get ramped up as a (very sub-par) developer. I hung around on IRC, subscribed to the various mailing lists, and tried my hardest to learn, improve, and contribute.<br />
<!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --><br />
Then someone pointed out that I'd never internationalized my plugins. Then they proceeded to go on a rant about how any developer who <em>didn't</em> internationalize their UI was doing a disservice to the community and was betraying their personal bias against and hatred towards non-English speakers.<br />
<!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --><br />
I was horrified.<br />
<!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --><br />
I came to the development world from marketing. I used Windows. I was very comfortable with graphical (often skeuomorphic) interfaces and could work my way around things easily with a mouse. I didn't understand the command line. I <em>barely</em> understood code. It took me months (and several misfires) just to learn enough Subversion to get my plugins out in the first place.<br />
<!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --><br />
All of the tools for internationalizing a plugin were, at the time, heavy into a command line that I didn't understand and couldn't use.<br />
<!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --><br />
I took a break and, ironically, this experience is what started me blogging. My break let me get some distance and gave me the chance to connect with other developers who <em>did</em> understand the command line tools. They taught me things I didn't know and I came back a much stronger dev.<br />
<!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --><br />
One of <a href="https://ttmm.io/tech/how-to-publish-a-wordpress-plugin-subversion/">my most popular blog posts</a> today is an old introduction I wrote for developers who wanted to use GUI tools to publish a WordPress plugin. Honestly, though, I wrote the walk through more to remind myself how to do things than anyone else ... and that's how I got started with most of my blogging work.<br />
<!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --><br />
A topic I've focused on more recently has been cryptography. More specifically, using cryptographic tools to ensure the integrity of various packages and messages. It's a heady topic, and a lot of the tools available for end users are painfully focused on power users who fully understand command line utilities.<br />
<!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --><br />
I want to change this.<br />
<!-- /wp:paragraph --></p>
<p><!-- wp:heading --><br />
<a name="announcement"></a></p>
<h2>Code Signing</h2>
<p><!-- /wp:heading --></p>
<p><!-- wp:paragraph --><br />
There's been a lot of talk about the security of the WordPress updater. Primarily, the updater checks the MD5 hash of a package's contents before proceeding to ensure its integrity, but that's the <em>only</em> test it runs.<br />
<!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --><br />
Consider what might happen if a malicious party were able to somehow breach the WordPress.org update server and present their own download package. This could potentially inject malicious code onto more than a quarter of the Internet all at once! Considering such a breach has happened with a few plugins in the past, it's not outside the realm of possibility.<br />
<!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --><br />
Now imagine if a hacker were able to drop themselves somehow between your server and the WordPress.org update system. Such an attacker could impersonate the updater and serve you whatever package they want. Your system wouldn't know the difference.<br />
<!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --><br />
<a href="https://ttmm.io/tech/world-domination-wordpress-security/">In the middle of last year</a>, I said I was working on a solution to bring formal code signing to WordPress. I held off for a while because it looked like the WordPress community might bring this feature to core.<br />
<!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --><br />
That didn't happen.<br />
<!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --><br />
So today, I'm proud to announce the release of <a href="https://wordpress.org/plugins/dgxpco/">DGXPCO: Digital Guarantees for eXplicitly Permitted Core Operations</a>. This plugin integrates directly with the WordPress core updater and <em>requires</em> that any core package have a valid signature in order for installation.<br />
<!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --><br />
For the moment, I am personally signing the contents of every core package distribution and maintaining the collection of signatures <a href="https://github.com/DisplaceTech/release-hashes">in a separate repository</a> that I serve through a secure CDN powered by Amazon Web Services.<br />
<!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --><br />
Every WordPress release includes both the core download for<em>new</em> installations as well as "partial" upgrade packages for anyone coming from an older install. I'm signing <em>all</em> of these and keeping a record in one spot so that everything from new installs to partial minor updates to major updates can benefit from the added security of checking a signature.<br />
<!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --><br />
The signatures are leverage an Ed25519 public/private keypair and <a href="https://github.com/jedisct1/libsodium">Libsodium</a> to sign the files' contents. I keep the <em>private</em> key offline, but have published the <em>public</em> key so everyone can keep an eye on things. <em>This key will not change</em>, and if anything is signed by a different key, you can be sure something is amiss.<br />
<!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --><br />
That public key, encoded in Hex, is <strong>5d4c696e571307b4a47626ae0bf9a7a229403c46657b4a9e832fee47e253bc5b</strong>.<br />
<!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --><br />
Every commit to the release hashes repository is also signed with <a href="https://keybase.io/eamann">my personal PGP key</a> so you can verify that I'm the one who added the new code.<br />
<!-- /wp:paragraph --></p>
<p><!-- wp:heading --></p>
<h2>Next Steps</h2>
<p><!-- /wp:heading --></p>
<p><!-- wp:paragraph --><br />
Is this fool-proof? Probably not. It is, however, a huge step forward in terms of WordPress security. There's quite a bit more we can do, and I want to outline some of my grand plan here.<br />
<!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --><br />
The first release of the plugin checks signatures upon update only, but WordPress will still tell you about an update even if the signature check fails. <strong>The next release</strong> will not even surface an update unless a signature is available.<br />
<!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --><br />
At the moment, this plugin only secures WordPress core updates. <strong>A future release</strong> will also secure plugin updates as well, in an opt-in fashion. I'll start by securing <em>my own</em> plugins as a proof of concept, then allow for other developers to opt-in to the stronger security moving forward.<br />
<!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --><br />
Today, I am the only one allowed to sign release packages. This is OK for the short term, but is not a sustainable model. <strong>As I prove out the update system</strong>, I'll also begin adding sets of public keys that are scoped to specific sets of packages. This will, for example, allow me to whitelist a small number of trusted developers to also sign core packages. It might also empower plugin developers to sign their own releases (but not anyone else's).<br />
<!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --><br />
At the end of the day, I'm looking now for feedback. We don't have this functionality in WordPress core <em>yet</em>, but DGXPCO is evidence that we can add it. We should add it. So let's work on the feature together.<br />
<!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --><br />
As I mentioned in my initial post last year, if you want to help with this endeavor, please let me know! If you want to contribute financially,<a href="https://www.paypal.me/eam">donations are always gladly accepted</a>.<br />
<!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --><br />
This is the <em>first</em> project I'm launching under the name of my new WordPress-related business, <a href="https://displace.tech/">Displace Technologies, LLC</a>.<br />
<!-- /wp:paragraph --></p>

        </div>
        <footer class="post-footer">
            <div class="post-share">
                <span class="post-share-title">Share:</span>
                <a target="_blank"
                    href="https://twitter.com/share?text=Introducing+Secure+Updates+for+WordPress&amp;url=https://ttmm.iotech/introducing-secure-updates-for-wordpress/">Twitter</a>
                <a target="_blank"
                    href="https://www.facebook.com/sharer/sharer.php?u=https://ttmm.iotech/introducing-secure-updates-for-wordpress/">Facebook</a>
            </div><!-- .share-post -->
            
            <p class="post-cats">
                <span class="post-share-title">Filed under </span>
                <a href="/categories/index.html#PHP"
                    rel="category">PHP</a>
                <a href="/categories/index.html#Technology"
                    rel="category">Technology</a>
                
            </p>
            
            
            <p class="post-tags">
                <span class="post-share-title">Tagged with </span>
                <a href="/tags/index.html#security"
                    rel="tag">security</a>
                <a href="/tags/index.html#WordPress"
                    rel="tag">WordPress</a>
                
            </p>
            
        </footer>
        
    </article>
    
    <section class="read-next inner">
        <h2 class="read-next-title">Read Next</h2>
        
        <article class="post">
            <header class="post-header">
                <div class="post-meta">
                    <time class="published" datetime="January 27, 2018">January 27, 2018</time>
                </div>
                <h3 class="post-title"><a href="/politics/open-letter-to-the-democratic-party-of-washington-county/">Open Letter to the Democratic Party of Washington County</a>
                </h3>
            </header>
        </article>
        
        
        <article class="post">
            <header class="post-header">
                <div class="post-meta">
                    <time class="published" datetime="April 6, 2018">April 6, 2018</time>
                </div>
                <h3 class="post-title"><a href="/php/sql-injection-in-cart66-pro/">Disclosure: SQL Injection in Cart66 Pro</a></h3>
            </header>
        </article>
        
    </section><!-- .read-next -->

</main><!-- .site-main -->


                

                
                <footer id="colophon" class="site-footer">
    <p class="site-info inner">
        <a href="#">Things that Matter Most</a> &copy; 2021. Royce theme by
        <a target="_blank" href="https://justgoodthemes.com/">JustGoodThemes</a>.
        <br />
        Powered by <a target="_blank" href="https://jekyllrb.com/">Jekyll</a>.
    </p>
    <a id="back-to-top" class="back-to-top" href="#page">
        <span class="icon-arrow-up" aria-hidden="true"></span>
        <span class="screen-reader-text">Back to top</span>
    </a>
</footer><!-- .site-footer -->
            </div><!-- .inner-wide -->
        </div><!-- .site-content -->
    </div><!-- .site -->

    
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-4156949-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-4156949-6', { 'anonymize_ip': true });
  </script>

    <!-- Javascript Assets -->
    <script src="/assets/js/jquery-3.3.1.min.js"></script>
    <script src="/assets/js/plugins.js"></script>
    <script src="/assets/js/custom.js"></script>

</body>

</html>