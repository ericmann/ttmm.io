<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    
        <!-- Begin Jekyll SEO tag v2.7.1 -->
<title>JavaScript Astrophysics | Things that Matter Most</title>
<meta name="generator" content="Jekyll v3.9.0" />
<meta property="og:title" content="JavaScript Astrophysics" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="As computers continue to develop and grow, so do the things they&#39;re capable of; just about any laptop capable of playing FarmVille can also run a sophisticated astrophysics simulation.  In college, it took me a few minutes with a room-sized supercomputer to derive the Chandrasekhar Limit.  The same derivation can now run in JavaScript, embedded in a web page, in a fraction of a second. The Science I&#39;m recreating a study I did several years ago in college on the Chandrasekhar Limit.  This limit is the absolute mass a star can possess to end its life as a white dwarf - anything heavier will instead collapse into a neutron star or, if sufficiently large, a black hole. Stellar Structure Every star in the sky obeys the same four physical laws: Hydrostatic Equilibrium - the force of gravity pushing in balances the pressure pushing out $latex P&#39;(x) = -(\frac{GM\rho}{r^2}) $ Energy Transport - energy moves from hot to cool $latex T&#39;(r) = -(\frac{3 \kappa \rho L}{16\pi acT^3r^2}) $ Conservation of Mass - the total mass is equal to the sum of the mass of all composite layers $latex M&#39;(r) = 4\pi r^2 \rho $ Conservation of Energy - the total energy is equal to the sum of the energies of composite layers $latex L&#39;(r) = 4\pi r^2 \rho e$ The variables above: $latex \pi $ - Pi $latex P $ - the pressure of a layer of the star $latex G $ - the gravitational constant typical in stellar calculations $latex \rho $ - the density at a particular point in the star relative to its center $latex r $ - the distance from the center of the star to the point above $latex T $ - the energy of the star $latex L $ - the star’s luminosity $latex e $ - the charge of an electron $latex \kappa $, $latex a $, $latex c $ - constants dictating the energy of a star. . The Death of Stars All stars are initially composed of the same material: hydrogen. The difference is in the amount of hydrogen present.  Some of the smallest stars[ref]Red dwarfs typically have a mass below ~0.4 time that of our sun.[/ref] are called red dwarfs.  Due to their small size, mass, and temperature they can burn for a long time without running out of fuel. Larger stars progress on to the next stage of stellar evolution.  After the hydrogen fuel in a star is completely exhausted, the star will expand into a giant and begin to burn the helium that is left over. The giants fuse this helium in their cores.  Generated by enormous heat and pressure, a core of carbon and oxygen builds up with helium fusion taking place in a shell surrounding it.  Continued helium fusion adds carbon to the star&#39;s core, forcing more contraction, heat, and fusion - leading also to the star&#39;s expansion. Sometimes the outer layers of the star are driven away to create planetary nebulae - the Ring Nebula is a great example.  The core of a smaller star becomes a stellar corpse - what we call a &quot;white dwarf&quot; because of its high temperature and small size. Electron Degeneracy Each atom has electron orbitals that can have, in the 1s and 2s orbitals, at most two electrons or, in the 2p orbital, at most six electrons.  Electron degeneracy[ref]The Pauli Exclusion Principle is the theory that there are only so many differences between electrons and no two electrons can occupy the same point in space if they are identical.[/ref] is responsible for sustaining a white dwarf against its own gravity.  Identical electrons in the matter that makes up a white dwarf will push against each other, preventing the star from collapsing. Equation of State A white dwarf with low mass has a low pressure, thus its electrons can be treated non-relativistically.  In this case, the equation of state defining the relation between pressure and density is rather simple. $latex P( \rho ) = 1.004 \times 10^{13} (\frac{\rho}{\mu_{e}})^\frac{5}{3} $ In most cases, μe, the mean molecular weight per electron, is about equal to 2.  This equation can then be used in conjunction with four equations above to generate a rough computer model of the structure of a white dwarf. Under higher pressures, electrons are moving around so rapidly that they need to be treated relativistically.  Broken into several steps, the equation of state becomes: $latex P = 6.003 \times 10^{22} f(x) $ $latex f(x) = x(2x^2 - 3 )\sqrt{x^2 + 1} + 3sinh^{-1}x $ $latex x = 1.009 \times 10^{-2} - 2(\frac{\rho}{\mu_{e}})^\frac{1}{3} $ Once again, μe is about equal to 2.  In this system, the pressure-density relation approaches the non-relativistic relation when x (and thus P) is small. Relativity will affect the equation for hydrostatic equilibrium as well: $latex P&#39;(r) = -(\frac{GM\rho}{r^2})\frac{(1 + \frac{P}{\rho c^2})(1 + \frac{4\pi r^3P}{Mc^2})}{1 - \frac{2GM}{rc^2}} $ The Code Euler&#39;s Method Due to the complexity of the equations above, we use Euler&#39;s Method to approximate the integral. We simulate several stars with varying initial densities.  For each star, we&#39;ll start in the center, then take a small step towards the outer radius and make an estimation, followed by another step, and another. This will continue until the density of the star drops far enough that we can call it zero. Once we reach this point, we&#39;ll have both a mass for the star - the total mass of all the layers we just estimated - and a radius - the point at which we just stopped. Why JavaScript? The original code for this simulation was written in Fortran. Fortran is old and requires an environment that&#39;s largely inaccessible to modern developers. JavaScript, however, is accessible to everyone who has a web browser.  Unlike Fortran, it requires no compilation, is continuously being developed by the community as a whole, and there is a plethora of resources available online to learn to use it. The Simulation To make things efficient, the code below is broken up into two parts - one object-oriented, one procedural.  Take a second to read through the code, then I&#39;ll explain each part: Everything is contained inside a closure so we don&#39;t have too many objects floating around in the global scope. Within the closure, we define a handful of global constants, a single object for modelling a star, and a set of loops for running the simulation. The Dwarf object accepts initial values for $latex \rho $, $latex r $, and $latex m $ - these define the conditions at a point near the center of our simulated star. Our first for loop will create a total of 50 simulated stars, in order, with various initial central mass densities. It then calculates the mass of the star with that density near its center and instantiates a Dwarf object (flagging that we want to use a classical, non-relativistic model). The first while loop will tell the Dwarf object to start stepping outwards from the center of the star, using Euler&#39;s Method to calculate the changes in mass, radius, and density as it goes. When we reach a point where the density is sufficiently small, we move on. The next while loop does exactly the same thing, except assuming a relativistic model for calculating the changes in the star&#39;s internal conditions. Finally, we add the mass and radius of each star to two arrays exported to window.dataset. All of this happens in less than a second on the average modern home computer.[ref]The same simulation, in Fortran, took over an hour to run on the laptop I had in college. Even on the college mainframe system, it would take at least two minutes to loop through the various integration steps involved.[/ref] Results The Chandrasekhar Limit is a well-known constant with an accepted value of about $latex 1.44 M_{\odot} $ (about one and a half solar masses). This means any star heavier than $latex 1.44 M_{\odot} $ will not collapse into a white dwarf but will instead become a neutron star - or if sufficiently massive, a black hole - at the end of its life. The relationship between mass and radius is plotted on the chart below (solar masses on the x-axis, solar radii on the y-axis): [chanda_plot] Conclusion Studying astrophysics often involves complex mathematics and computer models to make sense of the world around us. In the past, this involved archaic programming syntax, specialized equipment, and development environments with significant learning curves. The astrophysics of today, however, is accessible to anyone with a computer and a web browser. In fact, if you&#39;re seeing the charts above, it means you just executed this very astrophysics simulation. In your own browser. In real time." />
<meta property="og:description" content="As computers continue to develop and grow, so do the things they&#39;re capable of; just about any laptop capable of playing FarmVille can also run a sophisticated astrophysics simulation.  In college, it took me a few minutes with a room-sized supercomputer to derive the Chandrasekhar Limit.  The same derivation can now run in JavaScript, embedded in a web page, in a fraction of a second. The Science I&#39;m recreating a study I did several years ago in college on the Chandrasekhar Limit.  This limit is the absolute mass a star can possess to end its life as a white dwarf - anything heavier will instead collapse into a neutron star or, if sufficiently large, a black hole. Stellar Structure Every star in the sky obeys the same four physical laws: Hydrostatic Equilibrium - the force of gravity pushing in balances the pressure pushing out $latex P&#39;(x) = -(\frac{GM\rho}{r^2}) $ Energy Transport - energy moves from hot to cool $latex T&#39;(r) = -(\frac{3 \kappa \rho L}{16\pi acT^3r^2}) $ Conservation of Mass - the total mass is equal to the sum of the mass of all composite layers $latex M&#39;(r) = 4\pi r^2 \rho $ Conservation of Energy - the total energy is equal to the sum of the energies of composite layers $latex L&#39;(r) = 4\pi r^2 \rho e$ The variables above: $latex \pi $ - Pi $latex P $ - the pressure of a layer of the star $latex G $ - the gravitational constant typical in stellar calculations $latex \rho $ - the density at a particular point in the star relative to its center $latex r $ - the distance from the center of the star to the point above $latex T $ - the energy of the star $latex L $ - the star’s luminosity $latex e $ - the charge of an electron $latex \kappa $, $latex a $, $latex c $ - constants dictating the energy of a star. . The Death of Stars All stars are initially composed of the same material: hydrogen. The difference is in the amount of hydrogen present.  Some of the smallest stars[ref]Red dwarfs typically have a mass below ~0.4 time that of our sun.[/ref] are called red dwarfs.  Due to their small size, mass, and temperature they can burn for a long time without running out of fuel. Larger stars progress on to the next stage of stellar evolution.  After the hydrogen fuel in a star is completely exhausted, the star will expand into a giant and begin to burn the helium that is left over. The giants fuse this helium in their cores.  Generated by enormous heat and pressure, a core of carbon and oxygen builds up with helium fusion taking place in a shell surrounding it.  Continued helium fusion adds carbon to the star&#39;s core, forcing more contraction, heat, and fusion - leading also to the star&#39;s expansion. Sometimes the outer layers of the star are driven away to create planetary nebulae - the Ring Nebula is a great example.  The core of a smaller star becomes a stellar corpse - what we call a &quot;white dwarf&quot; because of its high temperature and small size. Electron Degeneracy Each atom has electron orbitals that can have, in the 1s and 2s orbitals, at most two electrons or, in the 2p orbital, at most six electrons.  Electron degeneracy[ref]The Pauli Exclusion Principle is the theory that there are only so many differences between electrons and no two electrons can occupy the same point in space if they are identical.[/ref] is responsible for sustaining a white dwarf against its own gravity.  Identical electrons in the matter that makes up a white dwarf will push against each other, preventing the star from collapsing. Equation of State A white dwarf with low mass has a low pressure, thus its electrons can be treated non-relativistically.  In this case, the equation of state defining the relation between pressure and density is rather simple. $latex P( \rho ) = 1.004 \times 10^{13} (\frac{\rho}{\mu_{e}})^\frac{5}{3} $ In most cases, μe, the mean molecular weight per electron, is about equal to 2.  This equation can then be used in conjunction with four equations above to generate a rough computer model of the structure of a white dwarf. Under higher pressures, electrons are moving around so rapidly that they need to be treated relativistically.  Broken into several steps, the equation of state becomes: $latex P = 6.003 \times 10^{22} f(x) $ $latex f(x) = x(2x^2 - 3 )\sqrt{x^2 + 1} + 3sinh^{-1}x $ $latex x = 1.009 \times 10^{-2} - 2(\frac{\rho}{\mu_{e}})^\frac{1}{3} $ Once again, μe is about equal to 2.  In this system, the pressure-density relation approaches the non-relativistic relation when x (and thus P) is small. Relativity will affect the equation for hydrostatic equilibrium as well: $latex P&#39;(r) = -(\frac{GM\rho}{r^2})\frac{(1 + \frac{P}{\rho c^2})(1 + \frac{4\pi r^3P}{Mc^2})}{1 - \frac{2GM}{rc^2}} $ The Code Euler&#39;s Method Due to the complexity of the equations above, we use Euler&#39;s Method to approximate the integral. We simulate several stars with varying initial densities.  For each star, we&#39;ll start in the center, then take a small step towards the outer radius and make an estimation, followed by another step, and another. This will continue until the density of the star drops far enough that we can call it zero. Once we reach this point, we&#39;ll have both a mass for the star - the total mass of all the layers we just estimated - and a radius - the point at which we just stopped. Why JavaScript? The original code for this simulation was written in Fortran. Fortran is old and requires an environment that&#39;s largely inaccessible to modern developers. JavaScript, however, is accessible to everyone who has a web browser.  Unlike Fortran, it requires no compilation, is continuously being developed by the community as a whole, and there is a plethora of resources available online to learn to use it. The Simulation To make things efficient, the code below is broken up into two parts - one object-oriented, one procedural.  Take a second to read through the code, then I&#39;ll explain each part: Everything is contained inside a closure so we don&#39;t have too many objects floating around in the global scope. Within the closure, we define a handful of global constants, a single object for modelling a star, and a set of loops for running the simulation. The Dwarf object accepts initial values for $latex \rho $, $latex r $, and $latex m $ - these define the conditions at a point near the center of our simulated star. Our first for loop will create a total of 50 simulated stars, in order, with various initial central mass densities. It then calculates the mass of the star with that density near its center and instantiates a Dwarf object (flagging that we want to use a classical, non-relativistic model). The first while loop will tell the Dwarf object to start stepping outwards from the center of the star, using Euler&#39;s Method to calculate the changes in mass, radius, and density as it goes. When we reach a point where the density is sufficiently small, we move on. The next while loop does exactly the same thing, except assuming a relativistic model for calculating the changes in the star&#39;s internal conditions. Finally, we add the mass and radius of each star to two arrays exported to window.dataset. All of this happens in less than a second on the average modern home computer.[ref]The same simulation, in Fortran, took over an hour to run on the laptop I had in college. Even on the college mainframe system, it would take at least two minutes to loop through the various integration steps involved.[/ref] Results The Chandrasekhar Limit is a well-known constant with an accepted value of about $latex 1.44 M_{\odot} $ (about one and a half solar masses). This means any star heavier than $latex 1.44 M_{\odot} $ will not collapse into a white dwarf but will instead become a neutron star - or if sufficiently massive, a black hole - at the end of its life. The relationship between mass and radius is plotted on the chart below (solar masses on the x-axis, solar radii on the y-axis): [chanda_plot] Conclusion Studying astrophysics often involves complex mathematics and computer models to make sense of the world around us. In the past, this involved archaic programming syntax, specialized equipment, and development environments with significant learning curves. The astrophysics of today, however, is accessible to anyone with a computer and a web browser. In fact, if you&#39;re seeing the charts above, it means you just executed this very astrophysics simulation. In your own browser. In real time." />
<meta property="og:site_name" content="Things that Matter Most" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2013-05-24T15:56:56-07:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="JavaScript Astrophysics" />
<meta name="twitter:site" content="@" />
<script type="application/ld+json">
{"@type":"BlogPosting","headline":"JavaScript Astrophysics","dateModified":"2013-05-24T15:56:56-07:00","datePublished":"2013-05-24T15:56:56-07:00","mainEntityOfPage":{"@type":"WebPage","@id":"/tech/javascript-astrophysics/"},"url":"/tech/javascript-astrophysics/","description":"As computers continue to develop and grow, so do the things they&#39;re capable of; just about any laptop capable of playing FarmVille can also run a sophisticated astrophysics simulation.  In college, it took me a few minutes with a room-sized supercomputer to derive the Chandrasekhar Limit.  The same derivation can now run in JavaScript, embedded in a web page, in a fraction of a second. The Science I&#39;m recreating a study I did several years ago in college on the Chandrasekhar Limit.  This limit is the absolute mass a star can possess to end its life as a white dwarf - anything heavier will instead collapse into a neutron star or, if sufficiently large, a black hole. Stellar Structure Every star in the sky obeys the same four physical laws: Hydrostatic Equilibrium - the force of gravity pushing in balances the pressure pushing out $latex P&#39;(x) = -(\\frac{GM\\rho}{r^2}) $ Energy Transport - energy moves from hot to cool $latex T&#39;(r) = -(\\frac{3 \\kappa \\rho L}{16\\pi acT^3r^2}) $ Conservation of Mass - the total mass is equal to the sum of the mass of all composite layers $latex M&#39;(r) = 4\\pi r^2 \\rho $ Conservation of Energy - the total energy is equal to the sum of the energies of composite layers $latex L&#39;(r) = 4\\pi r^2 \\rho e$ The variables above: $latex \\pi $ - Pi $latex P $ - the pressure of a layer of the star $latex G $ - the gravitational constant typical in stellar calculations $latex \\rho $ - the density at a particular point in the star relative to its center $latex r $ - the distance from the center of the star to the point above $latex T $ - the energy of the star $latex L $ - the star’s luminosity $latex e $ - the charge of an electron $latex \\kappa $, $latex a $, $latex c $ - constants dictating the energy of a star. . The Death of Stars All stars are initially composed of the same material: hydrogen. The difference is in the amount of hydrogen present.  Some of the smallest stars[ref]Red dwarfs typically have a mass below ~0.4 time that of our sun.[/ref] are called red dwarfs.  Due to their small size, mass, and temperature they can burn for a long time without running out of fuel. Larger stars progress on to the next stage of stellar evolution.  After the hydrogen fuel in a star is completely exhausted, the star will expand into a giant and begin to burn the helium that is left over. The giants fuse this helium in their cores.  Generated by enormous heat and pressure, a core of carbon and oxygen builds up with helium fusion taking place in a shell surrounding it.  Continued helium fusion adds carbon to the star&#39;s core, forcing more contraction, heat, and fusion - leading also to the star&#39;s expansion. Sometimes the outer layers of the star are driven away to create planetary nebulae - the Ring Nebula is a great example.  The core of a smaller star becomes a stellar corpse - what we call a &quot;white dwarf&quot; because of its high temperature and small size. Electron Degeneracy Each atom has electron orbitals that can have, in the 1s and 2s orbitals, at most two electrons or, in the 2p orbital, at most six electrons.  Electron degeneracy[ref]The Pauli Exclusion Principle is the theory that there are only so many differences between electrons and no two electrons can occupy the same point in space if they are identical.[/ref] is responsible for sustaining a white dwarf against its own gravity.  Identical electrons in the matter that makes up a white dwarf will push against each other, preventing the star from collapsing. Equation of State A white dwarf with low mass has a low pressure, thus its electrons can be treated non-relativistically.  In this case, the equation of state defining the relation between pressure and density is rather simple. $latex P( \\rho ) = 1.004 \\times 10^{13} (\\frac{\\rho}{\\mu_{e}})^\\frac{5}{3} $ In most cases, μe, the mean molecular weight per electron, is about equal to 2.  This equation can then be used in conjunction with four equations above to generate a rough computer model of the structure of a white dwarf. Under higher pressures, electrons are moving around so rapidly that they need to be treated relativistically.  Broken into several steps, the equation of state becomes: $latex P = 6.003 \\times 10^{22} f(x) $ $latex f(x) = x(2x^2 - 3 )\\sqrt{x^2 + 1} + 3sinh^{-1}x $ $latex x = 1.009 \\times 10^{-2} - 2(\\frac{\\rho}{\\mu_{e}})^\\frac{1}{3} $ Once again, μe is about equal to 2.  In this system, the pressure-density relation approaches the non-relativistic relation when x (and thus P) is small. Relativity will affect the equation for hydrostatic equilibrium as well: $latex P&#39;(r) = -(\\frac{GM\\rho}{r^2})\\frac{(1 + \\frac{P}{\\rho c^2})(1 + \\frac{4\\pi r^3P}{Mc^2})}{1 - \\frac{2GM}{rc^2}} $ The Code Euler&#39;s Method Due to the complexity of the equations above, we use Euler&#39;s Method to approximate the integral. We simulate several stars with varying initial densities.  For each star, we&#39;ll start in the center, then take a small step towards the outer radius and make an estimation, followed by another step, and another. This will continue until the density of the star drops far enough that we can call it zero. Once we reach this point, we&#39;ll have both a mass for the star - the total mass of all the layers we just estimated - and a radius - the point at which we just stopped. Why JavaScript? The original code for this simulation was written in Fortran. Fortran is old and requires an environment that&#39;s largely inaccessible to modern developers. JavaScript, however, is accessible to everyone who has a web browser.  Unlike Fortran, it requires no compilation, is continuously being developed by the community as a whole, and there is a plethora of resources available online to learn to use it. The Simulation To make things efficient, the code below is broken up into two parts - one object-oriented, one procedural.  Take a second to read through the code, then I&#39;ll explain each part: Everything is contained inside a closure so we don&#39;t have too many objects floating around in the global scope. Within the closure, we define a handful of global constants, a single object for modelling a star, and a set of loops for running the simulation. The Dwarf object accepts initial values for $latex \\rho $, $latex r $, and $latex m $ - these define the conditions at a point near the center of our simulated star. Our first for loop will create a total of 50 simulated stars, in order, with various initial central mass densities. It then calculates the mass of the star with that density near its center and instantiates a Dwarf object (flagging that we want to use a classical, non-relativistic model). The first while loop will tell the Dwarf object to start stepping outwards from the center of the star, using Euler&#39;s Method to calculate the changes in mass, radius, and density as it goes. When we reach a point where the density is sufficiently small, we move on. The next while loop does exactly the same thing, except assuming a relativistic model for calculating the changes in the star&#39;s internal conditions. Finally, we add the mass and radius of each star to two arrays exported to window.dataset. All of this happens in less than a second on the average modern home computer.[ref]The same simulation, in Fortran, took over an hour to run on the laptop I had in college. Even on the college mainframe system, it would take at least two minutes to loop through the various integration steps involved.[/ref] Results The Chandrasekhar Limit is a well-known constant with an accepted value of about $latex 1.44 M_{\\odot} $ (about one and a half solar masses). This means any star heavier than $latex 1.44 M_{\\odot} $ will not collapse into a white dwarf but will instead become a neutron star - or if sufficiently massive, a black hole - at the end of its life. The relationship between mass and radius is plotted on the chart below (solar masses on the x-axis, solar radii on the y-axis): [chanda_plot] Conclusion Studying astrophysics often involves complex mathematics and computer models to make sense of the world around us. In the past, this involved archaic programming syntax, specialized equipment, and development environments with significant learning curves. The astrophysics of today, however, is accessible to anyone with a computer and a web browser. In fact, if you&#39;re seeing the charts above, it means you just executed this very astrophysics simulation. In your own browser. In real time.","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

    

    <!-- Site Favicon -->
    <link rel="shortcut icon" href="/assets/images/favicon.ico" type="image/png" />

    <!-- Font Embed Code -->
	<link href="https://fonts.googleapis.com/css?family=Crimson+Text:400,400i,600,600i|Karla:400,400i,700,700i" rel="stylesheet">

    <!-- CSS Styles -->
    <link href="/assets/css/style.css" rel="stylesheet">
</head>



<body class="layout-post">
    <div id="page" class="site">
        <header id="masthead" class="site-header">
    <div class="site-header-wrap">
        <div class="site-header-inside">

            <div class="site-branding">
                
                <p class="profile">
                    <a href="/">
                        <img src="/assets/images/authorimage.jpg" alt="'s Picture"
                            class="avatar" />
                    </a>
                </p>
                <div class="site-identity">
                    
                    <h1 class="site-title">
                        <a href="/">Things that Matter Most</a>
                    </h1>
                    
                    
                    <p class="site-description">Things that Matter Most</p>
                    
                </div><!-- .site-identity -->
                
                <button id="menu-toggle" class="menu-toggle"><span class="screen-reader-text">Main Menu</span><span
                        class="icon-menu" aria-hidden="true"></span></button>
            </div><!-- .site-branding -->

            <nav id="main-navigation" class="site-navigation" aria-label="Main Navigation">
                <div class="site-nav-wrap">
                    <div class="site-nav-inside">
                    <ul class="menu">
                        
                        
                        
                        <li class="menu-item "><a href="/">Home</a></li>
                        
                        
                        
                        <li class="menu-item "><a href="/about">About</a></li>
                        
                        
                        
                        <li class="menu-item "><a href="/contact">Contact Me</a></li>
                        
                        
                        
                        <li class="menu-item "><a href="/search">Search</a></li>
                        
                    </ul>
                    <p class="social-links">
    
    <a href="https://twitter.com/ericmann" target="_blank">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
<!--
Font Awesome Free 5.5.0 by @fontawesome - https://fontawesome.com
License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
-->
    </a>
    
    
    
    <a href="https://github.com/ericmann" target="_blank">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
<!--
Font Awesome Free 5.5.0 by @fontawesome - https://fontawesome.com
License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
-->
    </a>
    
    
    
    
    
    
    
    <a href="https://www.linkedin.com/in/ericallenmann" target="_blank">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg>
<!--
Font Awesome Free 5.5.0 by @fontawesome - https://fontawesome.com
License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
-->
    </a>
    
    
    
</p>
                    </div><!-- .site-nav-inside -->
                </div><!-- .site-nav-wrap -->
            </nav><!-- .site-navigation -->

        </div><!-- .site-header-inside -->
    </div><!-- .site-header-wrap -->
</header><!-- .site-header -->
        <div id="content" class="site-content fadeInDown delay_075s">
            <div class="inner-wide">
                <main id="main" class="site-main">

    <article class="post-full inner">

        <header class="post-header">
            <div class="post-meta">
                <time class="post-date" datetime="2013-05-24">
                    May 24, 2013
                </time>
            </div><!-- .post-meta -->
            <h1 class="post-title">JavaScript Astrophysics</h1>
        </header><!-- .post-header -->

        
        <div class="post-content">
            <p>As computers continue to develop and grow, so do the things they're capable of; just about any laptop capable of playing FarmVille can also run a sophisticated astrophysics simulation.  In college, it took me a few minutes with a room-sized supercomputer to derive the <a title="Chandrasekhar Limit" href="http://en.wikipedia.org/wiki/Chandrasekhar_limit">Chandrasekhar Limit</a>.  The same derivation can now run in JavaScript, <a title="Skip to the Simulation" href="https://ttmm.io/tech/javascript-astrophysics/#js-simulation">embedded in a web page</a>, in a fraction of a second.<!--more--></p>
<h2>The Science</h2>
<p>I'm recreating a study I did several years ago in college on the Chandrasekhar Limit.  This limit is the absolute mass a star can possess to end its life as a <a title="White Dwarf" href="http://en.wikipedia.org/wiki/White_dwarf">white dwarf</a> - anything heavier will instead collapse into a <a title="Neutron star" href="http://en.wikipedia.org/wiki/Neutron_star">neutron star</a> or, if sufficiently large, a <a title="Black Hole" href="http://en.wikipedia.org/wiki/Black_hole">black hole</a>.</p>
<h3>Stellar Structure</h3>
<p>Every star in the sky obeys the same four physical laws:</p>
<ol>
<li>Hydrostatic Equilibrium - the force of gravity pushing <em>in</em> balances the pressure pushing <em>out</em><br />
$latex P'(x) = -(\frac{GM\rho}{r^2}) $</li>
<li>Energy Transport - energy moves from hot to cool<br />
$latex T'(r) = -(\frac{3 \kappa \rho L}{16\pi acT^3r^2}) $</li>
<li>Conservation of Mass - the total mass is equal to the sum of the mass of all composite layers<br />
$latex M'(r) = 4\pi r^2 \rho $</li>
<li>Conservation of Energy - the total energy is equal to the sum of the energies of composite layers<br />
$latex L'(r) = 4\pi r^2 \rho e$</li>
</ol>
<p>The variables above:</p>
<ul>
<li>$latex \pi $ - Pi</li>
<li>$latex P $ - the pressure of a layer of the star</li>
<li>$latex G $ - the gravitational constant typical in stellar calculations</li>
<li>$latex \rho $ - the density at a particular point in the star relative to its center</li>
<li>$latex r $ - the distance from the center of the star to the point above</li>
<li>$latex T $ - the energy of the star</li>
<li>$latex L $ - the star’s luminosity</li>
<li>$latex e $ - the charge of an electron</li>
<li>$latex \kappa $, $latex a $, $latex c $ - constants dictating the energy of a star. .</li>
</ul>
<h3>The Death of Stars</h3>
<p>All stars are initially composed of the same material: hydrogen. The difference is in the amount of hydrogen present.  Some of the smallest stars[ref]Red dwarfs typically have a mass below ~0.4 time that of our sun.[/ref] are called red dwarfs.  Due to their small size, mass, and temperature they can burn for a long time without running out of fuel.</p>
<p>Larger stars progress on to the next stage of stellar evolution.  After the hydrogen fuel in a star is completely exhausted, the star will expand into a giant and begin to burn the helium that is left over.</p>
<p>The giants fuse this helium in their cores.  Generated by enormous heat and pressure, a core of carbon and oxygen builds up with helium fusion taking place in a shell surrounding it.  Continued helium fusion adds carbon to the star's core, forcing more contraction, heat, and fusion - leading also to the star's expansion.</p>
<p>Sometimes the outer layers of the star are driven away to create planetary nebulae - the <a title="Ring Nebula" href="http://en.wikipedia.org/wiki/Ring_Nebula">Ring Nebula</a> is a great example.  The core of a smaller star becomes a stellar corpse - what we call a "white dwarf" because of its high temperature and small size.</p>
<h3>Electron Degeneracy</h3>
<p>Each atom has electron orbitals that can have, in the 1s and 2s orbitals, at most two electrons or, in the 2p orbital, at most six electrons.  Electron degeneracy[ref]The <a title="Pauli Exclusion Principle" href="http://en.wikipedia.org/wiki/Pauli_exclusion_principle">Pauli Exclusion Principle</a> is the theory that there are only so many differences between electrons and no two electrons can occupy the same point in space if they are identical.[/ref] is responsible for sustaining a white dwarf against its own gravity.  Identical electrons in the matter that makes up a white dwarf <a title="Electron Degeneracy Pressure" href="http://en.wikipedia.org/wiki/Electron_degeneracy_pressure">will push against each other</a>, preventing the star from collapsing.</p>
<h3>Equation of State</h3>
<p>A white dwarf with low mass has a low pressure, thus its electrons can be treated non-relativistically.  In this case, the equation of state defining the relation between pressure and density is rather simple.</p>
<p style="text-align: center;">$latex P( \rho ) = 1.004 \times 10^{13} (\frac{\rho}{\mu_{e}})^\frac{5}{3} $</p>
<p>In most cases, μ<sub>e</sub>, the mean molecular weight per electron, is about equal to 2.  This equation can then be used in conjunction with four equations above to generate a rough computer model of the structure of a white dwarf.</p>
<p>Under higher pressures, electrons are moving around so rapidly that they need to be treated relativistically.  Broken into several steps, the equation of state becomes:</p>
<p style="text-align: center;">$latex P = 6.003 \times 10^{22} f(x) $</p>
<p style="text-align: center;">$latex f(x) = x(2x^2 - 3 )\sqrt{x^2 + 1} + 3sinh^{-1}x $</p>
<p style="text-align: center;">$latex x = 1.009 \times 10^{-2} - 2(\frac{\rho}{\mu_{e}})^\frac{1}{3} $</p>
<p>Once again, μ<sub>e</sub> is about equal to 2.  In this system, the pressure-density relation approaches the non-relativistic relation when x (and thus P) is small. Relativity will affect the equation for hydrostatic equilibrium as well:</p>
<p style="text-align: center;">$latex P'(r) = -(\frac{GM\rho}{r^2})\frac{(1 + \frac{P}{\rho c^2})(1 + \frac{4\pi r^3P}{Mc^2})}{1 - \frac{2GM}{rc^2}} $</p>
<h2 id="js-simulation">The Code</h2>
<h3>Euler's Method</h3>
<p>Due to the complexity of the equations above, we use <a title="Euler's Method" href="http://en.wikipedia.org/wiki/Euler%27s_method">Euler's Method</a> to <em>approximate</em> the integral. We simulate several stars with varying initial densities.  For each star, we'll start in the center, then take a small step towards the outer radius and make an estimation, followed by another step, and another. This will continue until the density of the star drops far enough that we can call it zero.</p>
<p>Once we reach this point, we'll have both a mass for the star - the total mass of all the layers we just estimated - and a radius - the point at which we just stopped.</p>
<h3>Why JavaScript?</h3>
<p>The original code for this simulation was written in Fortran. Fortran is old and requires an environment that's largely inaccessible to modern developers.</p>
<p>JavaScript, however, is accessible to everyone who has a web browser.  Unlike Fortran, it requires no compilation, is continuously being developed by the community as a whole, and there is a <a title="Codecademy" href="http://www.codecademy.com/">plethora</a> of <a title="Code School" href="http://www.codeschool.com/">resources</a> available online to learn to use it.</p>
<h3>The Simulation</h3>
<p>To make things efficient, the code below is broken up into two parts - one object-oriented, one procedural.  Take a second to read through the code, then I'll explain each part:</p>
<p><script type="text/javascript" src="https://gist.github.com/ericmann/5625416.js"></script>Everything is contained inside a closure so we don't have too many objects floating around in the global scope. Within the closure, we define a handful of global constants, a single object for modelling a star, and a set of loops for running the simulation.</p>
<p>The <tt>Dwarf</tt> object accepts initial values for $latex \rho $, $latex r $, and $latex m $ - these define the conditions at a point near the center of our simulated star.</p>
<p>Our first <tt>for</tt> loop will create a total of 50 simulated stars, in order, with various initial central mass densities. It then calculates the mass of the star with that density near its center and instantiates a <tt>Dwarf</tt> object (flagging that we want to use a classical, non-relativistic model).</p>
<p>The first <tt>while</tt> loop will tell the <tt>Dwarf</tt> object to start stepping outwards from the center of the star, using Euler's Method to calculate the changes in mass, radius, and density as it goes. When we reach a point where the density is sufficiently small, we move on.</p>
<p>The next <tt>while</tt> loop does exactly the same thing, except assuming a relativistic model for calculating the changes in the star's internal conditions.</p>
<p>Finally, we add the mass and radius of each star to two arrays exported to <tt>window.dataset</tt>. All of this happens in less than a second on the average modern home computer.[ref]The same simulation, in Fortran, took over an hour to run on the laptop I had in college. Even on the college mainframe system, it would take at least two minutes to loop through the various integration steps involved.[/ref]</p>
<h3>Results</h3>
<p>The Chandrasekhar Limit is a well-known constant with an <a title="Chandrasekhar Limit" href="http://en.wikipedia.org/wiki/Chandrasekhar_limit">accepted value</a> of about $latex 1.44 M_{\odot} $ (about one and a half solar masses). This means any star heavier than $latex 1.44 M_{\odot} $ will not collapse into a white dwarf but will instead become a neutron star - or if sufficiently massive, a black hole - at the end of its life.</p>
<p>The relationship between mass and radius is plotted on the chart below (solar masses on the x-axis, solar radii on the y-axis):</p>
<p>[chanda_plot]</p>
<h2>Conclusion</h2>
<p>Studying astrophysics often involves complex mathematics and computer models to make sense of the world around us. In the past, this involved archaic programming syntax, specialized equipment, and development environments with significant learning curves. The astrophysics of today, however, <em><strong>is accessible to anyone with a computer and a web browser.</strong></em><b><i><br />
</i></b></p>
<p>In fact, if you're seeing the charts above, it means you just executed this very astrophysics simulation. In your own browser. In real time.</p>

        </div>
        <footer class="post-footer">
            <div class="post-share">
                <span class="post-share-title">Share:</span>
                <a target="_blank"
                    href="https://twitter.com/share?text=JavaScript+Astrophysics&amp;url=https://ttmm.iotech/javascript-astrophysics/">Twitter</a>
                <a target="_blank"
                    href="https://www.facebook.com/sharer/sharer.php?u=https://ttmm.iotech/javascript-astrophysics/">Facebook</a>
            </div><!-- .share-post -->
            
            <p class="post-cats">
                <span class="post-share-title">Filed under </span>
                <a href="/categories/index.html#Technology"
                    rel="category">Technology</a>
                
            </p>
            
            
            <p class="post-tags">
                <span class="post-share-title">Tagged with </span>
                <a href="/tags/index.html#astronomy"
                    rel="tag">astronomy</a>
                <a href="/tags/index.html#chandrasekhar+limit"
                    rel="tag">chandrasekhar limit</a>
                <a href="/tags/index.html#javascript"
                    rel="tag">javascript</a>
                <a href="/tags/index.html#white+dwarf"
                    rel="tag">white dwarf</a>
                
            </p>
            
        </footer>
        
    </article>
    
    <section class="read-next inner">
        <h2 class="read-next-title">Read Next</h2>
        
        <article class="post">
            <header class="post-header">
                <div class="post-meta">
                    <time class="published" datetime="May 23, 2013">May 23, 2013</time>
                </div>
                <h3 class="post-title"><a href="/tech/plugin-review-spam-free-wordpress/">Plugin Review - Spam Free WordPress</a>
                </h3>
            </header>
        </article>
        
        
        <article class="post">
            <header class="post-header">
                <div class="post-meta">
                    <time class="published" datetime="May 29, 2013">May 29, 2013</time>
                </div>
                <h3 class="post-title"><a href="/php/securing-forms-without-captcha/">Securing Forms Without Captcha</a></h3>
            </header>
        </article>
        
    </section><!-- .read-next -->

</main><!-- .site-main -->


                

                
                <footer id="colophon" class="site-footer">
    <p class="site-info inner">
        <a href="#">Things that Matter Most</a> &copy; 2021. Royce theme by
        <a target="_blank" href="https://justgoodthemes.com/">JustGoodThemes</a>.
        <br />
        Powered by <a target="_blank" href="https://jekyllrb.com/">Jekyll</a>.
    </p>
    <a id="back-to-top" class="back-to-top" href="#page">
        <span class="icon-arrow-up" aria-hidden="true"></span>
        <span class="screen-reader-text">Back to top</span>
    </a>
</footer><!-- .site-footer -->
            </div><!-- .inner-wide -->
        </div><!-- .site-content -->
    </div><!-- .site -->

    
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-4156949-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-4156949-6', { 'anonymize_ip': true });
  </script>

    <!-- Javascript Assets -->
    <script src="/assets/js/jquery-3.3.1.min.js"></script>
    <script src="/assets/js/plugins.js"></script>
    <script src="/assets/js/custom.js"></script>

</body>

</html>